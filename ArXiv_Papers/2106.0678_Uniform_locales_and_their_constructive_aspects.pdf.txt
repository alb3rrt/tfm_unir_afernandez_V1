arXiv:2106.00678v1 [math.GN] 1 Jun 2021

Uniform locales and their constructive aspects
Graham Manuell
Abstract. Much work has been done on generalising results about uniform spaces to the pointfree context. However, this has almost exclusively been done using classical logic, whereas much of the utility of the pointfree approach lies in its constructive theory, which can be interpreted in many different toposes. Johnstone has advocated for the development of a constructive theory of uniform locales and wrote a short paper on the basic constructive theory via covering uniformities, but he never followed this up with a discussion of entourage uniformities or completions.
We present a more extensive constructive development of uniform locales, including both entourage and covering approaches, their equivalence, completions and some applications to metric locales and localic algebra.
Some aspects of our presentation might also be of interest even to classically minded pointfree topologists. These include the definition and manipulation of entourage uniformities using the internal logic of the geometric hyperdoctrine of open sublocales and the emphasis on pre-uniform locales. The latter leads to a description of the completion as the uniform reflection of the pre-uniform locale of Cauchy filters and a new result concerning the completion of pre-uniform localic rings, which can be used to easily lift addition and multiplication on Q to R (or Qp) in the pointfree setting.
0. Introduction
Thirty years ago in [13] Johnstone took the first steps in a constructive development of the theory of uniform locales. This was promised to be the first in a series of papers on the topic, but the later papers never materialised and no one else has taken up the mantle.
Still the classical theory of uniform locales (and uniform spaces) has continued unabated and it would be as useful as ever to have access to these techniques in the constructive setting, where the results we prove have greater applicability by being interpretable in any topos with natural numbers object.
This paper can be thought of as a somewhat belated sequel to [13] (in addition to making some minor corrections and modifications to the theory developed there). We have nonetheless attempted to keep our development self-contained within reason, though the original paper still provides a useful source of counterexamples (which we do not discuss) and a more exploratory account of what the theory should be.
Date: May 2021. 2010 Mathematics Subject Classification. 54E15, 06D22, 03F65, 54B30. Key words and phrases. uniform frame, metric frame, open locale, localic algebra. The author acknowledges financial support from the Centre for Mathematics of the University of Coimbra (UIDB/00324/2020, funded by the Portuguese Government through FCT/MCTES).

2
We describe uniform locales in terms of both entourages and covers and prove their equivalence before developing the theory of uniform completions. Our account is somewhat atypical in how strong a focus it places on pre-uniform locales. This provides an easy route to proving completeness and cocompleteness of the category UnifLoc of uniform locales by factoring the forgetful functor UnifLoc  Loc into a reflective subcategory UnifLoc  PUnifLoc, a topological functor PUnifLoc  OLoc and coreflective subcategory OLoc  Loc. It also allows us to phrase the relationship between the classifying locale of all Cauchy filters and the completion in terms of the uniform reflection.
However, the true motivation for this approach is revealed in the final section where we discuss a few important examples of uniform locales and make some first applications to localic algebra. Here it seems to be important to be able to take completions of pre-uniform locales, since the uniform reflection might not preserve products, while its composite with the completion always does. This is apparent already in the example of completing the rational numbers to give the localic ring of real numbers.
We also provide a constructive proof of the classically known result that an overt localic group is complete with respect to its two-sided uniformity. Further properties of uniform locales, such as total boundedness, will be left for a later paper.
Let me end this section by drawing the reader's attention to some other related work in formal topology that I became aware of after starting to write this paper. In [15], Kawai describes the completion a uniform space as formal topology. He uses the gauge approach to uniform spaces, and as I understand it, what are called (generalised) uniform spaces there are closer to what are sometimes called (quasi-)gauge spaces and have different morphisms. The paper [6] also considers a notion of uniform formal topologies using gauges, but the notion of completeness considered there depends on the (global) points of the formal topology and thus appears to be weaker than the usual definition of completeness for uniform locales.
Finally, Kawai mentions in [15] that the PhD thesis of Fox [7] also discusses uniform formal topologies, though unfortunately I was unable to obtain a copy of this thesis until very recently. The thesis is worth reading. Fox defines uniform formal topologies in terms of covers, describes their relation to metric formal topologies and gauges and defines a uniform completion. Thus, despite not discussing entourages there is some overlap with the current paper. Nonetheless, our approach is significantly different and I believe that the locale-theoretic framework used in this paper will be more easily understandable to a wider audience than the approach via formal topology used by Fox.
1. Background
We assume a basic knowledge of (at least the classical theory of) frames and locales. See [19] for a good introduction, which also has a nice account of the classical situation regarding uniform frames and locales. Background on uniform spaces is not strictly necessary, but can be found in standard general topology textbooks such as [22].
We denote the category of locales by Loc and the category of frames by Frm. We will usually start with a locale X and write OX for its associated frame. We maintain a strict notational distinction between these to avoid confusion between an open a  OX and an element of x of X in the internal logic (described below). If f : X  Y is a locale

3
morphism, we write f  for the corresponding frame map and f for its right adjoint. If f  has a left adjoint, we will write this as f!.
We do not assume the reader has any great familiarity with constructive pointfree topology and will attempt to provide a brief introduction below. A reasonably extensive introduction to the topic can be found in the background chapter of [17] and further information can be found in [14, Part C]. The constructive theory of metric locales is described in [9].
Some understanding of category theory is also assumed. We make some use of the theory of topological functors, a good account of which can be found in [1]. We will also use the internal logic of a geometric hyperdoctrine, the basic idea of which we describe below. A slightly longer overview can again be found in the background of [17], but for a more careful and thorough introduction see [20].
1.1. Positivity, overtness and hyperdoctrines. Constructively, the initial frame is the lattice of truth values , though this is no longer necessarily isomorphic to the twoelement set {, }. When using constructive logic, we do not have access to double negation elimination and so it is best to phrase definitions in a `positive' way (without using negations) since negations can be difficult to get rid of once they are introduced. An example of this is can be seen in the relevant importance of nonempty versus inhabited sets. At set X is inhabited if x  X. This is more useful than the weaker condition that X = , since we have access to the element x to use in later arguments.
A similar concept appears in pointfree topology. An element a of a frame OX is said to be positive (written a > 0) if whenever a  A then the set A is inhabited. Classically, this is equivalent requiring a = 0, but constructively it is a stronger condition. We say the locale X is positive if 1 > 0 in OX. If V is a sublocale of X we write V  a to mean that the restriction of a to V is positive. In particular, a  b  a  b > 0.
A locale X is said to be overt if it has a base of positive elements. Some people also call such locales locally positive or even open. Classically, every locale is overt. Constructively, the condition is nontrivial, though it still holds for many locales that appear in practice. A locale X is overt if and only if the unique map ! : X  1 is open. In this case, the left adjoint  : OX   of the associated frame map measures the positivity of elements: (a) =   a > 0. Another characterisation gives that X is overt if the product projection 2 : X × Y  Y is open for every locale Y . In this way it can be seen to be a kind of `dual' to compactness. Finally, we note that open sublocales of overt locales are overt.
We write OLoc for the category of overt locales and locale morphisms. This is a coreflective subcategory of Loc. (A proof of this fact can be found in [16], but the main idea is that every locale has a largest overt sublocale.) Thus, OLoc is complete and cocomplete. Moreover, it can be shown that OLoc is closed under finite products in Loc and that OLoc has (epi, extremal mono)-factorisations where the extremal monomorphisms are precisely the overt sublocale inclusions.
The obvious functor O : OLocop  Frm sending an overt locale to its frame of opens satisfies the necessary axioms to be a geometric hyperdoctrine (without equality). This means that for every product projection 2 : X × Y  Y , the map O(2) = 2 has a left adjoint X satisfying the Frobenius reciprocity condition X(a  2(b)) = X(a)  b,

4
and moreover, the family of maps (X )Y : O(X × Y )  OY is natural in Y (the Beck­ Chevalley condition). These hold because the projections are open maps, which is why we need overtness.
This geometric hyperdoctrine allow us to interpret geometric logic in the category OLoc, with predicates being given by opens. We can discuss equality judgements t =x t, which state that terms (given by morphisms in the category) are equal, and sequents  x  where  and  are formulae in the variables x involving finite conjunctions, possibly infinitary disjunctions and existential quantification, which mean that the open defined by  is contained in that defined by . In particular, this logic contains regular logic as fragment and so we have a well-behaved calculus of open relations. For the details behind the interpretation of logic in hyperdoctrines see [20], while more information about the specific case of O : OLocop  Frm can be found in [17].
1.2. Strong density and weak closedness. Another important concept we will need is that of strong density. A locale map f : X  Y is dense if f (a) = 0 = a = 0. If X and Y are overt locales, f is strongly dense (or fibrewise dense) if a > 0 = f (a) > 0. Strong density implies density, but the converse cannot be proved constructively. It is strong density that is more important for the study of uniform locales.
We can express the condition for strong density in terms of  as (a)  f (a). Then taking right adjoints gives the equivalent condition that f!(p)  !(p) for all p  . (This definition even makes sense when X and Y are not overt, though we will not need this.)
Strongly dense maps form a factorisation system on OLoc together with the weakly closed sublocales. In particular, every overt sublocale V  X has a weak closure wk-cl(V )  X, which is the largest sublocale in which it is strongly dense (and this is necessarily overt). It can be shown that if V is an overt sublocale then V  a  wk-cl(V )  a. Every closed sublocale is weakly closed, but all sublocales of discrete locales are weakly closed, while all open sublocales of 1 are closed only if excluded middle holds.
With this weaker notion of closedness come weakened separation axioms. In particular, we say a locale X is weakly Hausdorff if the diagonal is weakly closed. Defining a to be weakly rather below b if wk-cl(a)  b in the order of sublocales we also obtain a notion of weak regularity. See [12] for more details.
1.3. Other miscellaneous results. As is well understood, the lattice of sublocales of a locale X is a coframe SX. Moreover, this is functorial so that for f : X  Y we have a coframe homomorphism Sf : SY  SX, which is obtained by pulling back along f . This map then has a left adjoint (Sf )! : SX  SY which can be understood as taking images. Now if V is an overt sublocale of X it can be shown that (Sf )!(V ) is overt and (Sf )!(V )  a  V  f (a).
We end this section by mentioning some results concerning products which will be of use to us.
Lemma 1.1. Let f : X  Y and g : X  Y  be strongly dense maps between overt locales. Then their product f × g : X × X  Y × Y  is strongly dense.
Proof. Consider the following pullback diagrams.

5

f × X

X × X

Y × X

Y ×g

Y × X

Y ×Y

1

1

2

2

X

f

Y

X

g

Y

Since X and Y are overt, the product projections 1 and 2 are open. But strongly dense maps are stable under pullback along open maps (see [11, Lemma 1.9]) and hence f × X
and Y × g are strongly dense. Thus, so is the composite f × g = (Y × g)  (f × X).

Lemma 1.2. Let f : X  Y and g : X  Y  be locale morphisms. Then (f × g)(c) = {f(a)  g(b) | a  b  c}.
Proof. See [4, Section 3, Lemma 2] (though the proof is not difficult).

2. Entourage uniformities
Uniform locales are probably most easily understood via the entourage approach. An (open) entourage on a locale X can be thought of an open approximate equality relation on X.
In order to have a good theory of open relations, we require a well-behaved notion of existential quantification for open subobjects and we must therefore restrict our attention to overt locales. Since O : OLocop  Frm is in particular a regular hyperdoctrine, we may define composition of open relations E, F  O(X × X) in the internal logic by
F  E = {(x, z) : X × X | y : X. (x, y)  E  (y, z)  F }.

We can now use this to mimic the usual definition of a uniform space.
Definition 2.1. A pre-uniform locale is an overt locale X equipped with a filter E on O(X × X) such that for each E  E,
· x: X (x, x)  E,
· there is an Eo  E such that (x, y)  E x,y : X (y, x)  Eo,
· there is an F  E such that F  F  E.
We call E a uniformity and the elements of E entourages. We say a set B  E is a base for the uniformity E if E is generated by B as an upset.
This is not yet what is usually called a uniform locale, since we have not assumed a compatibility condition between the uniformity E and the `topology' of X and so it is possible for X to have a finer topology than that induced by E. In particular, X could be a discrete locale in which case we recover the definition of a uniform space (but where we do not think of X as being equipped with the usual uniform topology).
Definition 2.2. We define the uniformly below relation on the opens of a pre-uniform locale (X, E) by
a  b  E  E. E  (a  a)  b  b.

6
Then a uniform locale is a pre-uniform locale (X, E) such that every b  OX can be expressed as
b = a.
ab
In this case the uniformity E is said to be admissible.
The following lemma provides an intuitive way to understand the uniformly below relation using the internal logic.
Lemma 2.3. Let E be an entourage. We have E  (a  a)  b  b if and only if
y  a  (y, z)  E y,z : X z  b
in the internal logic. An equivalent expression is y : X. y  a  (y, z)  E z : X z  b.
Proof. Let us start with the forward direction. In the internal logic the assumption means y : X. x  a  y  a  (y, z)  E x,z : X x  b  z  b. We can simply ignore the x  b part of the consequent and eliminate the existential quantification to obtain x  a  y  a  (y, z)  E x,y,z : X z  b. But now substituting in y for x yields the desired sequent.
For the converse, note that the assumption implies x  a x: X x  b by reflexivity (taking z = y = x). Then this together with the assumption again easily gives the desired statement. Finally, the second form easily seen to be equivalent to the first by the rules for existential quantification.
The uniformly below relation satisfies many of the axioms of a strong inclusion on OX (see [2]).
Lemma 2.4. Let (X, E) be a pre-uniform locale. Then the uniformly below relation satisfies:
i)         ,
ii)  is a sublattice of OX × OX,
iii)  is interpolative -- that is,     .
Proof. i) For the first inclusion, suppose a  a  b  b. Then E  (a  a)  b  b for some E  E, and hence we easily find E  (a  a)  E  (a  a)  b  b  b  b, so that a  b, as required.
We actually already proved the second inclusion in Lemma 2.3 using reflexivity and the equivalent description of the uniformly below relation given there.
ii) It is easy to see that 0  0 and 1  1. It then suffices to show a  b and a  b implies a  b  b and that a  b and a  b implies a  a  b.
For the former, we have E  (a  a)  b  b and E  (a  a)  b  b for some E, E  E. Thus, (E  E)  (a  a)  (E  (a  a))  (E  (a  a))  (b  b)  (b  b). Since E  E  E, we may conclude that a  b  b.
For the latter, we have E (aa)  bb and E(a a)  bb for some E, E  E. Thus, by Lemma 2.3 we have y  a  (y, z)  E y,z : X z  b and y  a  (y, z)  E y,z : X z  b and so we may conclude (y  a  (y, z)  E)  (y  a  (y, z)  E) y,z : X z  b.

7
The equivalent form of E  ((a  a)  (a  a))  b  b then follows by distributivity, as required.
iii) Suppose a  b. Then E  (a  a)  b  b for some E  E. Take F  E such that F  F  E and set c = {z : X | y : X. y  a  (y, z)  F }. Again by the characterisation in Lemma 2.3, we have a  c. Moreover, F  (c  c)  b  b if and only if y : X. x : X. x  a  (x, y)  F  (y, z)  F z : X z  b. This is equivalent to x : X. x  a  (x, z)  F F z : X b, which holds since F F (aa)  E (aa)  bb. Thus, c  b and  interpolates.
Morphisms of uniform locales can be defined straightforwardly.
Definition 2.5. A morphism of (pre-)uniform locales f : (X, E)  (Y, F ) is a morphism of locales f : X  Y such that (f × f )(F )  E for all F  F .
Lemma 2.6. If f : (X, E)  (Y, F ) is a morphism of pre-uniform locales, then f  preserves the uniformly below relation.
Proof. Suppose a  b in Y . Then there is an F  F such that F  (a  a)  b  b. Applying f   f  we have (f   f )(F  (a  a))  f (b)  f (b). Note that in the internal logic (x, z)  (f   f )(F  (a  a)) holds if and only if y : Y. (f (x), y)  a  a  (y, f (z))  F . This is implied by y : X. (f (x), f (y))  a  a  (f (y), f (z))  F and hence (f   f )(F )  (f (a)  f (a))  (f   f )(F  (a  a))  f (b)  f (b). Therefore, since (f   f )(F )  E we have f (a)  f (b).
Proposition 2.7. The category PUnifLoc of pre-uniform locales is topological over OLoc.
Proof. Consider a family of pre-uniform locales (Xi, Ei) and locale morphisms fi : Y  Xi where i  I. We claim that there is an initial lift (Y, E). Here we define E to be the filter generated by (fi × fi)(Ei) for each Ei  Ei and each i  I.
Note that this is indeed a uniformity. First observe that (fi × fi)(Ei) always satisfies the reflexivity condition and that this condition is stable under finite meets. It is also easy to see that the symmetry condition is inherited from the Ei uniformities. Finally, consider a general entourage E = jJ (fj × fj)(Ej)  E where J is a finite subset of I. For each Ej there is a Fj  Ej such that Fj  Fj  Ej. Then as we saw before, (fj × fj)(F )  (fj × fj)(F )  (fj × fj)(F  F )  (fj × fj)(Ej), and therefore setting F = jJ(fj × fj)(F )  E we have F  F  E. Thus, the final axiom of an entourage is satisfied.
Now is now routine to check that (Y, E) satisfies the necessary property in order to be a universal lift.
By a general result, limits in PUnifLoc can be computed as the limits of the underlying overt locales equipped with the initial uniformity with respect to the limiting cone. Moreover, the existence of initial structures implies the existence of final structures. Then colimits can be computed dually and we obtain the following corollary.
Corollary 2.8. The category PUnifLoc is complete and cocomplete.
The following result allows the category UnifLoc of uniform locales to inherit some of the good behaviour of the category of pre-uniform locales. We state it here for convenience,

8
but since it will be easier to prove with covering uniformities, we postpone the proof until Section 3.
Proposition 2.9. Uniform locales form a reflective subcategory of the category pre-uniform locales.
Corollary 2.10. The category UnifLoc is complete and cocomplete.
We can also use this approach to define the notion of a uniform embedding.
Definition 2.11. A morphism of (pre-)uniform locales is a uniform embedding if it is an initial locale embedding -- that is, if it is initial with respect to the topological functor PUnifLoc  OLoc and its underlying locale morphism is an extremal monomorphism. By general principles, these maps are precisely the extremal monomorphisms in PUnifLoc.
Explicitly, we have that if (X, E) is a pre-uniform locale and i : S  X is an overt sublocale, then i is a uniform embedding if and only if the S is equipped with the uniformity {(i × i)(E) | E  E}. Moreover, it is easy to see that in this case S is a uniform locale whenever X is.
3. Covering uniformities
In pointfree topology it is more common to describe uniform locales via uniform covers and this is the approach taken by Johnstone in [13]. However, as pointed out in [18], all definitions of uniform spaces or locales via covers that I have been able to find [21, 10, 22, 8, 13, 19] are incorrect. Classically the error is a minor one, since it only manifests for uniformities on the empty set (or the initial locale), but constructively it is more important. I explain this error after the definitions below.
Definition 3.1. A covering downset C on a locale X is a downset on OX such that C = 1. We say a covering downset is strong if it is generated by its positive elements.
Definition 3.2. Given a locale X, an overt sublocale V of X and a covering downset U  OX, the star of V with respect to U is defined by st(V, U) = {u  U | V  u}. In particular, this yields a notion of star of an open a  OX when X is overt. For a covering downset U on an overt locale we set U = {st(u, U) | u  U}.
Lemma 3.3. Let V and U be as defined as above. Then V  wk-cl(V )  st(V, U) under the ordering of sublocales.
Proof. First note that since V  a  wk-cl(V )  a, we have st(V, U) = st(wk-cl(V ), U) and hence it is enough to prove V  st(V, U).
We write the frame quotient map associated to V as a  a  V . To prove the result we will show st(V, U)  V = 1 in OV .
Since U is a cover, we have U = 1 in OX. Applying the quotient map then gives {u  V | u  U} = 1 in OV . Now since V is overt, we may replace this join by a similar
one consisting only of positive elements {u  V | u  U, u  V > 0}. But u  V > 0 in V if and only if V  u in X and hence this join is in turn equal to ( {u  U | V  u})  V , which is simply st(V, U)  V . Thus, we have shown st(V, U)  V = 1, as required.

9
Definition 3.4. A pre-uniform locale via covers is an overt locale X equipped with a filter U of covering downsets such that for every U  U there exists a strong V  U such that V   U .
Remark 3.5. Where the usual definitions of covering uniformities go wrong is that they omit the strength condition on V . Without it, {{0}} and the powerset of {0} would be distinct valid uniformities on the trivial locale in disagreement with the entourage approach. Johnstone [13] notices that this strength condition is important and calls a uniformity proper if it satisfies it, but does not require it for every uniformity, nor does he require (pre-)uniform locales to be overt in general. (Johnstone also fails to require that a uniformity be inhabited, but I imagine this was just an mistake in the writeup.)
Nonetheless, it is easy to modify an otherwise valid covering uniformity to ensure that the strength condition holds. It is not hard to see that a collection B of covering downsets that is a base for a filter which satisfies every property of a covering uniformity aside from the strength condition can be made into a base for a true uniformity by simply replacing each B  B with {u  B | u > 0}.
Definition 3.6. We define the uniformly below relation on the opens of a pre-uniform locale via covers (X, U) by
a  b  U  U. st(a, U)  b.
Then as before, a uniform locale via covers is a pre-uniform locale via covers (X, U) such that every b  OX can be expressed as b = ab a.
As is well-known classically, the definition of uniformities via covers is equivalent to the entourage approach discussed in Section 2.
Definition 3.7. A morphism of (pre-)uniform locales via covers f : (X, U)  (Y, V) is a morphism of locales f : X  Y such that f [V ]  U for all V  V.
Theorem 3.8. There is an isomorphism of categories between the category of pre-uniform locales via entourages and the category of pre-uniform locales via covers (which commutes with the forgetful functor into OLoc).
Proof. Let (X, U) be a pre-uniform locale via covers. We define an entourage uniformity U on X with basic entourages of the form U = {u  u | u  U} for each strong covering downset U  U. It is easy to see that U  V  U  V and so this is indeed a filter base. We now confirm that the three axioms hold.
First observe that if  : X  X × X is the diagonal map, (U ) = {u  u | u  U} = 1, since U is a cover. But this is precisely what the reflexivity axiom is saying in the internal logic.
Next we note that each of these basic entourages is fixed under the automorphism of X × X sending (x, y) to (y, x) in the internal logic. It follows easily that the symmetry condition holds for the resulting filter of entourages.
Finally, we require for each basic entourage U an entourage F  U such that F  F  U. We claim that if V is a strong covering downset such that V   U, then V is such an F . Suppose (x, z)  V  V in the internal logic. This means there is a y : X such that (x, y)  V and (y, z)  V . But V = {v  v | v  V } and so we may assume x, y  v and y, z  v for some v, v  V . Thus, we have reduced the claim to the

10
proving sequent x  v  z  v  y : X. y  v  v x,z : X (x, z)  U . But this sequent just means that v  v  U whenever v  v. In that case, v, v  st(v, V ). So v  v  st(v, V )  st(v, V )  wV st(w, V )  st(w, V ) = V   U and the claim follows.
We now show that the map (X, U)  (X, U ) is functorial. We need only show that if f  : OY  OX sends uniform covers to uniform covers, then it sends entourages to entourages. It is enough to show this for basic entourages. Suppose V is a basic entourage on Y . We have (f ×f )(V ) = {f (v)f (v) | v  V } = {uu | u  f [V ]} = f [V ], which is a (basic) entourage on X.
Now let (X, E) be a pre-uniform locale (via entourages). We define a covering uniformity E with basic covering downsets of the form E = {u  OX | u > 0, u  u  E} for each E  E. As above, reflexivity gives that 1 = {u  u | u  u  E}  {u | u  u  E}. Then by overtness, we may restrict this join to the positive elements and so E is indeed a cover. Again, it is easy to see that E  E  E  E and so E is a filter base. To see that E is a covering uniformity, it just remains to show the `star-refinement' axiom.
Let E be a basic covering downset in E. We must find a strong covering downset V in E such that V   E. By using the final `transitivity' axiom of entourage uniformities twice we have that there is an F  E such that F  F  F  E. We claim that F is a V satisfying the above condition.
To see this, first note that F is strong by construction. To show F   E, it is enough to show that for all v  F , st(v, F )  u for some positive u such that u  u  E. In particular, we can show st(v, F )  st(v, F )  E. (We may restrict to v > 0 since F is strong and then st(v, F )  v > 0.) Further expanding the definitions, we have st(v, F ) = {v  OX | v > 0, v  v  F, v  v} and so the desired inequality reduces to v  v  E for all v, v such that v  v, v  v  F , v  v and v  v. We now use the internal logic. Take x  v and y  v. There exist x  v  v and y  v  v. Now since x, x  v, we have (x, x)  F . Similarly, (y, y)  F . But recall that v  F , so that v  v  F . Thus since x, y  v, we also have (x, y)  F . So by the definition of relational composition, we have (x, y)  F  F  F  E. Therefore, F   E and E is a covering uniformity.
As before, we show that (X, E)  (X, E) is functorial by proving that f  : OY  OX sends uniform covers to uniform covers whenever it sends entourages to entourages. Let F be a basic uniform covering downset on Y . To show that this is sent to a uniform cover we require that E  f [F ] for some entourage E on X. We will take E = (f × f )(F ) for an entourage F  on Y to be chosen later. So we require {u | u > 0, u  u  (f × f )(F )}  {f (v) | v > 0, v  v  F }. Explicitly, for a positive u such that u  u  (f × f )(F ), we require a positive v such that v  v  F and u  f (v). To find such a v we might try to take v as small as possible such that u  f (v). If f had a left adjoint f! we could achieve this by taking v = f!(u). In general this is not possible. However, we can approximate this by taking image of u as a sublocale (which always exists) and then using the star operation to find an open containing this. In this way we set v = st((Sf )!(u), F ). Then f (v) = f (st((Sf )!(u), F )) = st(u, f [F ])  u, as desired. Also note that (Sf )!(u) is positive as the image of the positive open u and hence v > 0. It remains to show v  v  F .

11
This can be shown in a similar way to the proof of the star-refinement axiom above. Expanding the definitions, we must show that given w, w such that w  w  F  and w  w  F  and such that u  f (w) and u  f (w), we can conclude w  w  F . In the internal logic, we take x  w and y  w. Then x : X. x  u  f (x)  w and y : X. y  u  f (y)  w. Recall u  u  (f × f )(F ) and so we have (x, f (x))  w  w  F , (f (x), f (y))  F  and (f (y), y)  F . Thus, (x, y)  F   F   F . Now we can choose F  to satisfy F   F   F   F and so we are done.
We have thus constructed functors from the category of pre-uniform locales via covers to the pre-uniform locales via entourages and back. Moreover, it is clear that these commute with the forgetful functor into OLoc. It remains to show that these are inverses and it is enough to show this on objects.
Consider a covering uniformity U on X. Then U has a base consisting of covering downsets of the form U = {v  OX | v > 0, v  v  {u  u | u  U}} for each uniform covering
downset U  U. We may restrict to strong U, in which case it is clear that U  U and hence U  U.
On the other hand, suppose v is one of the generators of U . Then v > 0 so that v  1 = U and hence v  u for some u  U . We then have v (v u)  {u(uu) | u  U }
and applying (1)! we find v  {u  U | u  u} = st(u, U )  U . Therefore, U  U . It follows that U  U and hence U = U, as required.
Finally, suppose E is an entourage uniformity on X. Then E has a base of entourages of the form E = {u  u | u  OX, u > 0, u  u  E} for each entourage E  E. It is
clear that E  E and hence E  E.
For the other direction, let F be an entourage such that F F  E and let G = F F o  E. Suppose u  u  G, where we may assume u, u > 0 without loss of generality. We have u  u  G  F and u  u  Go  F . Now in the internal logic, consider x, z  u. Since u > 0, we have y : X. y  u. Thus, (x, y)  uu  F and (y, z)  uu  F . It follows that (x, z)  F  F  E. So we have shown u  u  E. Similarly, u  u  E and hence (uu)(uu) = uuuu u uu u  E. Thus, uu  (uu)(uu)  E
and we can conclude that G  E. It follows that E  E and hence E = E, as required.
Now in order to relate the entourage and covering approaches to uniform locales, we must understand the relationship between their uniformly below relations.
Lemma 3.9. With the definitions from the previous theorem, if E is an entourage and E  (a  a)  b  b then st(a, E)  b. If U is a uniform covering downset and st(a, U)  b, then U (aa)  bb. Therefore, the uniformly below relation defined from an entourage uniformity and that defined by its corresponding covering uniformity coincide.
Proof. Suppose E  (a  a)  b  b. Recall that in the internal logic this is equivalent to y : X. y  a  (y, z)  E z : X z  b. We also have st(a, E) = {u  E | a  u} =
{u | u  u  E, a  u}. Consider u  OX such that u  u  E and a  u. Then if z  u in the internal logic, we can take y  a  u and conclude that z  b. So u  b and hence st(a, E)  b, as required.

12
Now suppose st(a, U)  b. Then for any u  U such that a  u, we have u  b. We must show y  a  (y, z)  U y,z : X z  b where U = {u  u | u  U }. By the join and existential quantification rules it is enough to show y : X. y  a  (y, z)  u  u z : X z  b for each u  U. But this is just the assumption expressed in the internal logic and so we are done.
Now combining Theorem 3.8 and Lemma 3.9 we obtain the following result.
Theorem 3.10. The isomorphism of categories from Theorem 3.8 restricts to one between uniform locales via entourages and uniform locales via covers.
We can now provide the proof of Proposition 2.9, which states that UnifLoc is a reflective subcategory of PUnifLoc, using the covering approach.
Proof of Proposition 2.9. Given a pre-uniform locale X = (X, U), we can consider the set R  OX of elements b such that b = ab a. We claim that R is a subframe of OX.
This is most easily understood by showing the map r : b  ab a is a conucleus -- that is, a meet-preserving interior operator. Certainly, r is monotone and deflationary. For idempotence, we consider a  b. Then there is a c such that a  c  b and so a  c  r(b). Hence, r(b)  r(r(b)) and r is idempotent.
We have r(1) = 1, since 1  1. We must show r(b)  r(b)  r(b  b). It suffices to consider a  b and a  b and show that a  a  b  b. But this is immediate from part (ii) of Lemma 2.4. Thus, r is indeed a conucleus and its set of fixed points R is a subframe.
We define X to be the locale with underlying frame R equipped with the final uniformity from the locale map given by R  OX. This uniformity can be described explicitly as {U  R | i[U]  U} where i is the subframe inclusion. It is easy to see this is indeed the final uniformity once we know it is a uniformity at all. The only nontrivial condition to check is that for each U  R such that i[U]  U there is a strong cover V such that i[V ]  U and V   U. Since i is injective and hence strongly dense we know that a > 0 in R if and only if i(a) > 0 in OX. Thus, there is no difference between strength or the star operation with respect to the subframe versus the parent frame and so it is enough to show that covers of the from i[U] give a base for U.
Let V be a uniform cover of X and consider the downset V  = {u | u  v  V }. Take a uniform cover W such that W   V . Then for w  W , we have w  st(w, W )  V and hence w  V . Thus, W  V  and so V  is a uniform cover. But note that uv u lies in R by idempotence of r and set U = { uv u | v  V }  R. It is now clear that V   i[U]  V and so U is uniform cover of X and the covers of the form i[U] form a base for U.
The above arguments also quickly imply that the uniformly below relations on R and OX agree. Thus, the uniformity on X is admissible by the construction of R.
We claim that the epimorphism of pre-uniform locales X : X  X induced by i is the unit of an adjunction between  and the inclusion functor from UnifLoc into PUnifLoc. Consider the following diagram in PUnifLoc where Y is a uniform locale. We must show f  exists. (It is unique since X is epic.)

13
X

X

f

X

f

Y

Since X is final, it is sufficient to check this factorisation on the level of the underlying locale maps. So we only need to show that the image of the frame homomorphism f  lies in R  OX.
As Y is a uniform locale, every element of OY satisfies b = ab a. Applying f  we obtain f (b) = ab f (a)  af(b) a  R, where the inequality holds since a  b = f (a)  f (b). The result follows.
We end this section with some more basic results about uniform locales. The following result was already observed by Johnstone in [13].
Proposition 3.11. Uniform locales are weakly regular.
Proof. By Lemma 3.3 we know that a  b implies that a is weakly rather below b. Thus, weak regularity follows from the admissibility condition.
Remark 3.12. In fact this gives somewhat more. Classically under the assumption of the Axiom of Dependent Choice, uniform locales are not just regular, but completely regular. Without Dependent Choice (but still using classical logic) complete regularity is too strong a condition. However, there is a variant of completely regularity, called strong regularity in [3], which still holds. A frame is strongly regular if every element b can be expressed as b = ab a for some interpolative relation  contained in . This is implied by complete regularity, and is equivalent to it given Dependent Choice. Moreover, using classical logic, a locale is uniformisable if and only if it is strongly regular. The terminology becomes rather unfortunate in our setting: since the uniformly below relation interpolates, the above proof shows that every uniform locale is `strongly weakly regular'.
Corollary 3.13. Strongly dense uniform maps are epic in UnifLoc.
Proof. The proof proceeds exactly like the familiar one for Hausdorff spaces/locales.
A full characterisation of uniformisable locales appears to be difficult and we do not attempt it here. However, the following proposition does improve on Johnstone's result that completely regular (overt) locales are uniformisable.
Proposition 3.14. Strongly regular overt locales are uniformisable.
Proof. Let X be an overt locale and let  be an interpolative relation contained in  witnessing its strong regularity. We will take our subbasic uniform covering downsets to be {a, b} for a  b. Note that these are indeed covers since a  b implies a  b.
We claim that the covers of the form {u  i Ci | u > 0} where each Ci is one of these subbasic covers constitute a base for an admissible covering uniformity on X. To show this gives a uniformity it suffices to find for each subbasic cover {a0, a1} a finite set S of

14

subbasic covers such that ( S)  {a0, a1}. We use the interpolativity of  to obtain

a0

 a1 3

 a2 3

 a1

and consider C

=

{a0

,

a

1 3

}



{a1 , a 2 } 33



{a2 , a1}.
3

Writing each

{x, y}

as

x



y

and

using

distributivity

we

find

that

C

=

{a

1 3

,

a0



a 2 , a1 33



a1, a2 }.
3

Observe

that

the

first

two

elements

a1 3

and

a0



a

2 3

are

disjoint

from

the

last

element

a2 ,
3

while the last two elements are disjoint from the first one. Thus, when x is one of the

first

two

elements

we

have

st(x, C)



a1 3



(a0



a2) 3



(a1
3



a1)



a1

and

when

x

is

one

of

the

last

two

elements

we

have

st(x, C)



(a0



a2) 3



(a1
3

 a1)  a2
3

 a0.

So we do

have C  {a0, a1} as required.

Finally, we show admissibility. Suppose a  b. Then {a, b} is a uniform cover and we have st(a, {a, b})  b and hence a is uniformly below b. Admissibility then follows from
the assumption that b = ab a.

4. Completion

We are now in a position to discuss completeness of uniform locales. The definition is similar to the classical case except we use weak closedness and strong density instead of ordinary closedness and density.

Definition 4.1. A uniform locale X is complete if it is universally weakly closed in the sense that whenever it occurs as a uniform sublocale of a uniform locale, it is a weakly closed sublocale. Equivalently, it is complete if every strongly dense uniform embedding X  Y is an isomorphism.

Every uniform locale has a completion -- that is, a (unique) complete uniform locale in which it is strongly densely uniformly embedded. As in the spatial setting, the completion may be constructed by means of Cauchy filters.
Definition 4.2. A Cauchy filter on a uniform locale (X, U) is a filter F on OX such that
· F only contains positive elements,
· F contains an open from every uniform cover.
We say a Cauchy filter F is regular if for every a  F there is a b  F such that b  a.
The regular Cauchy filters on X will be the points of the completion of X. Thus, we consider the classifying locale CX of the theory of regular Cauchy filters on X. This classifying locale is given by a presentation with a generator [a  F ] for each a  OX and the following relations:
i) [1  F ] = 1,
ii) [a  b  F ] = [a  F ]  [b  F ],
iii) [a  F ]  {1 | a > 0},
iv) uU [u  F ] = 1 for each U  U , v) [a  F ]  ba[b  F ]. By the universal property of the classifying locale, the identity morphism on CX corresponds to a `CX-indexed regular Cauchy filter on X' sending a  OX to [a  F ]  OCX.

15
There is also a locale embedding  : X  CX given by the frame homomorphism [a  F ]  a (corresponding to the identity X-indexed regular Cauchy filter on X). In fact, it is not hard to see that the former map is the right adjoint of the latter. (For the nontrivial direction, write a general element of OCX as [a  F ] and break the inequality up into a part for each .) Condition (iii) then implies that (!(p))  !(p) for all p   and hence  is strongly dense.
It will also be useful to define the classifying locale CX of all Cauchy filters on X. The
presentation is similar to that of CX, but without the regularity condition (v). As above,
we have a canonical strongly dense embedding : X  CX defined by  : [a  F ]  a and whose right adjoint is a CX-indexed Cauchy filter on X sending a to [a  F ]. Of course, we have  =  and   =  where  is the natural embedding CX  CX.
We can use  to define a pre-uniform structure on CX.
Lemma 4.3. Let (X, U) be a uniform locale. The downsets of the form  [U] for U  U
form a base for a covering uniformity on CX. Moreover, : X  CX is a strongly dense
uniform embedding.
Proof. First note that CX is overt, since X is overt and : X  CX is strongly dense.
The above downsets indeed are covers by condition (iv). It is also easy to see that they form a filter base.
For the star-refinement axiom, consider  [U]. There is a strong V  U such that V   U . We claim ( [V ])   [U ]. It suffices to show st( (v), [V ])  (st(v, V ))   [U] for all v  V . Consider w  V such that (v)  (w). Since is strongly dense, we then have v  w =  (v  w) = ( (v)  (w)) > 0 and hence v  w. Thus, w  st(v, V ) so that (w)  (st(v, V )) and the claim follows.
Finally, since  is a section of , it preserves positive elements. To see this explicitly, suppose a  OX is positive and (a)  A. Applying  we have a =  (a) 
[A]. Hence [A] is inhabited and so is A. Thus, (a) is positive. It follows that [V ] as defined above is strong since V is. Thus, we have shown that we do have a base
for a uniformity on CX. The map is then a uniform embedding by construction, since
  = idOX .
We obtain a uniform structure on CX in a similar way.
Corollary 4.4. Let (X, U) be a uniform locale. The downsets of the form [U] for U  U form a base for an admissible covering uniformity on CX. Moreover,  : X  CX is a strongly dense uniform embedding.
Proof. As above we have that CX is overt, since X is overt and  : X  CX is strongly dense. Now since   = , the downsets [U] form a base for the uniformity on CX
inherited as a sublocale of CX. Furthermore,  is a uniform embedding as before.
It only remains to show admissibility. As we showed above for we have st((v), [V ])  (st(v, V )). Applying  we then see that st(v, V )  u implies st((v), [V ])  (u) and so v  u in OX implies (v)  (u) in OCX. It is enough to show admissibility for the basic opens (u) = [u  F ] and by condition (v) we have (u)  vu (v) 
(v)(u) (v), as required.

16

The uniformity on CX is not in general admissible, while the uniformity on CX is. The
following proposition explains the relationship between these pre-uniform locales.

Proposition 4.5. The uniform locale CX is the uniform reflection of CX. Moreover, the frame homomorphism corresponding to the unit  CX : CX  CX is left adjoint to .
Proof. We claim there is a well-defined frame map r : OCX  O CX sending [a  F ] to
ba[b  F ]. By part (ii) of Lemma 2.4 we see it satisfies relations (i) and (ii) and it
satisfies (iii) simply due to the similar relation on O CX. For condition (iv) we can use
that star-refinement axiom to show that {b | b  a  U} is a uniform cover whenever U is. Finally, relation (v) holds since  interpolates.

We now show that r is left adjoint to . It is clear that r = idOCX by condition (v) on OCX. On the other hand, r([a  F ]) = ba[b  F ]  [a  F ] and so r  idO CX, as required.

By the universal property of the uniform reflection, the image of r : OCX  O CX lies in the the subframe O CX of elements B such that B  AB A. We must show that
every such element lies in the image of r.

Suppose B  AB A. Then since the elements [a  F ] form a base, we have B  [aF ]B[a  F ]. Now suppose [a  F ]  B. Then st([a  F ], [U ])  B for some
uniform cover U on X. Explicitly, st([a  F ], [U ]) = uU, au[u  F ]. Now let V be a uniform cover such that V   U and take v  V such that v  a. Then st(a  v, V )  st(v, V )  U, and clearly st(a  v, V )  a, so that [st(a  v, V )  F ]  st([a  F ], [U])  B. Thus, [a  v  F ]  [b  F ]  B for some b  OX and so we have [a  v  F ]  [cF ][bF ]B[c  F ] = r(B).
Taking the join over all such v we then find vV, va[a  v  F ]  r(B). Now note that vV, va[a  v  F ] = vV [a  v  F ] = [a  F ]  vV [v  F ] = [a  F ] where the
first equality follows from condition (iii) for CX, the second equality is from condition
(ii) and the third equality is from condition (iv). Therefore, [a  F ]  r(B) and so r(B)  B  [aF ]B[a  F ]  r(B). Thus, B is in the image of r as required.
We now observe that C and C are functorial.

Proposition 4.6. The construction of the locale of Cauchy filters gives rise to a functor
C: UnifLoc  PUnifLoc. Furthermore, the maps : X  CX assemble into a natural transformation from the inclusion UnifLoc  PUnifLoc to C.

Proof. Let f : X  Y be a morphism of uniform locales. Recall that

X 

:

OX



O CX

is an CX-indexed Cauchy filter on X, from which it easily follows that

X 

f



is

an

O CX-indexed Cauchy filter on Y . By the universal property of CY we obtain a frame

homomorphism from O CY to O CX. Explicitly this sends [a  F ] to [f (a)  F ]. We

define Cf to be a corresponding locale map.

It is now easy to see this definition respects identities and composition and that is natural.

Corollary 4.7. Similarly, the regular Cauchy filter locale yields a functor C : UnifLoc  UnifLoc and the maps  : X  CX give a natural transformation from the identity to C.

17
Proof. Simply set C =   C and note that  is equal to  (up to isomorphism).
We shall now attempt to show CX is the completion of X. To see this we note that some of the results that we have seen to hold for  actually hold for any strongly dense uniform embedding. We will proceed in a similar manner to [19, Chapter VIII] for the next few results. Let us begin by proving an analogue of Corollary 4.4.
Lemma 4.8. If j : (X, U)  (Y, V) is a strongly dense embedding of pre-uniform locales, then the downsets of the form j[U] for U  U form a base for V.
Proof. We first observe that the downsets j[U] are V-uniform covering downsets. Since j is a uniform embedding, every U  U contains j[V ] for some V  V. We then have j[U ]  jj[V ]  V and hence j[U ]  V.
Now take V  V. There is a W  V such that W   V . Then j[W ]  U and we claim jj[W ]  V . An element of jj[W ] is of the form jj(w) for w  W . Note that if jj(w)  a, then by strong density of j we have j(w) = jjj(w)  j(a), which in turn means w  a. Thus, the open sublocale jj(w) is contained in wk-cl(w). But w  W satisfies st(w, W )  v for some v  V . Now by Lemma 3.3 we have jj(w)  wk-cl(w)  v and hence jj(w)  V , as claimed.
Now recall that the right adjoint  is an indexed regular Cauchy filter. In fact, this is true of every strongly dense uniform embedding, which helps explain why there is a link between Cauchy filters and completeness in the first place.
Lemma 4.9. Let j : (X, U)  (Y, V) be a strongly dense embedding of uniform locales. Then the right adjoint j : OX  OY is an (OY)-indexed regular Cauchy filter.
Proof. Since j preserves meets it satisfies conditions (i) and (ii) and strong density means j(a)  !(a) and hence condition (iii) holds.
To see condition (iv) holds recall that j is a uniform embedding and so each uniform covering downset U  U satisfies U  j[V ] for some V  V. We then have uU j(u) 
vV j(j(v))  vV v = 1, as required.
Now note that if b  j(a), then j(b)  jj(a) = a and hence j(a) = bj(a) b  j(b)a b  j(b)a jj(b)  ba j(b), which is the regularity condition (v).
We are now able to prove that CX is, in a sense, the largest uniform locale into which X can be strongly densely embedded.
Proposition 4.10. Let j : X  Y be any strongly dense embedding of uniform locales. Then  : X  CX factors uniquely through j to give a strongly dense uniform embedding k : Y  CX.
Proof. By Lemma 4.9 we have that j : OX  OY is an indexed regular Cauchy filter. Then by the universal property of CX this gives a locale map k : Y  CX whose corresponding frame homomorphism is defined by [a  F ]  j(a). This indeed composes with j to give , since jj = idOX .
Pulling back a basic uniform cover on CX along k gives {k(u) | u  U} for U a uniform cover on X. But note that k = j and so by Lemma 4.8 these give a base of uniform covers of Y . Hence k is uniform and initial. Now to show that k is a uniform embedding it remains to prove k is surjective. Observe that if b  a in OY then

18
b  {v  V | v  b}  a for some basic uniform cover V of Y and hence each a  OY is a join of elements of the form k(u). Consequently, k is indeed surjective. Finally, k is strongly dense since  is and the map k is unique since j is epic by Corollary 3.13.
It follows that CX is indeed the completion of X.
Theorem 4.11. The uniform locale CX is the unique completion of X.
Proof. We first show that CX is complete. Suppose e : CX  Y is a strongly dense uniform embedding. Then by Proposition 4.10 we have that e factors through  to give a uniform map f : Y  CX such that  = f e. But  is strongly dense and hence epic, so that f e = idCX and e is a split monomorphism. But e is also an epimorphism and thus an isomorphism. Therefore, CX is complete.
Now we show uniqueness. Suppose e : X  C is a completion of X. Then by Proposition 4.10 there is a strongly dense uniform embedding f  : C  CX such that f e = . This is an isomorphism by the completeness of C.
Theorem 4.12. Complete uniform locales form a reflective subcategory CUnifLoc of UnifLoc with C as the reflector and  as the unit.
Proof. By Theorem 4.11, CX is complete. Moreover, Y is an isomorphism for complete Y , since Y is a strongly dense embedding. Thus, any uniform map f : X  Y factors through X to give Y-1Cf . Finally, this factorisation is unique since Y is epic.
We will occasionally wish to talk about the completion of a pre-uniform locale. This may be defined simply as the completion of its uniform reflection. On the other hand,
the definition of CX works equally well when X is only a pre-uniform locale and its
fundamental properties still go through. With no essential modification the proof of
Proposition 4.5 then shows that  CX = CX in this general situation. Moreover, we
have X X =  CX X .
Even with this generalised notion of completion we have the following result.
Proposition 4.13. The completion of pre-uniform locales preserves finite products.
Proof. The terminal pre-uniform locale is already a complete uniform locale, since reflective subcategories are closed under limits in the parent category.
To show that C preserves binary products, it suffices to show that the canonical map from (X × Y ) to CX × CY is a strongly dense uniform embedding. The latter is complete, since as a reflective subcategory, complete uniform locales are closed under products.
Certainly the unit X : X  X is strongly dense since it is an epimorphism of locales. Also, we already know that X : X  CX is strongly dense. Therefore, the composite XX : X  CX is strongly dense (and similarly for Y ). It then follows that the product map X × Y  CX × CY is strongly dense. This factors through the unit map X×Y : X × Y  (X × Y ) to give the map in question. Now as required, this map is strongly dense since it is the second factor of strongly dense map.
The functoriality of C means that uniform maps between pre-uniform locales lift to (uniform) maps between their completions. However, these are not the only maps that lift to (not-necessarily-uniform) maps between the completions.

19
Lemma 4.14. A general locale map f : X  Y between pre-uniform locales lifts to give a (unique) locale map f : CX  CY such that f XX = Y Y f if and only if (X)(X)f  sends uniform covers to covers.
Proof. The reverse direction of the proof proceeds as in the proof of Proposition 4.6. The composite map (X)(X)f  is an OCX-indexed Cauchy filter on Y and thus lifts
to give a frame homomorphism from O CY to OCX. Then the universal property of the uniform reflection of CY (together with the isomorphism  CX = CX) gives the
desired lift f : CX  CY .
For the forward direction consider the following calculation.
(X )(X )f Y  Y = (X )(X )X  X f   f 
Certainly, the frame homomorphism f sends all covers to covers and hence so does (X)(X)f Y  Y . But we also know that (Y ) and (Y ) preserve uniform covers and hence (X )(X )f Y  Y (Y )(Y ) = (X)(X )f Y (Y ) sends uniform covers to covers. Now in the proof of Proposition 2.9 we showed uniform covers of the form Y (Y )[U ] form a base for the uniformity on Y and hence (X)(X)f  also sends uniform covers to covers, as required.
This can also be expressed in terms of entourages.
Corollary 4.15. A locale map f : X  Y between pre-uniform locales lifts to a locale map f : CX  CY as above if and only if (XX × XX)(f × f ) sends entourages on Y to reflexive relations on CX.
Proof. We must simply show that (×)(f ×f ) sends entourages to reflexive relations if and only if f  sends uniform covers to covers.
The proof of the forward direction proceeds almost exactly as in the proof that the map (X, E)  (X, E) is functorial in Theorem 3.8 (and using u  f (v)  (u)  f (v) as appropriate).
Conversely, suppose  sends uniform covers to covers. Using the same notation as in Theorem 3.8 (and applying Lemma 1.2) we have
( × )(f × f )(V ) = {(a)  (b) | a  b  (f × f )(V )}
= {(c) | c  c  (f × f )(V )}
= {(c) | c  c  {f (v)  f (v) | v  V }}
 {(c) | c  f (v), v  V }
= {f (v) | v  V }
= (f [V ]) = 1.
Thus, ( × )(f × f ) indeed sends entourages to reflexive relations, as required.
It is sometimes convenient to be able to describe the completion of a (pre-)uniform locale X in terms of basic opens and basic uniformities on X instead of all elements of OX. This

20
was done in the metric case by Henry in [9]. We conclude this section with a discussion of how to do this in our setting.
Let X be a locale and let B be a collection of covers of X by positive opens such that {C | C  B} is a base for a covering uniformity U on X. Set B = B.
Note that every element of OX is a join of elements of B. For a  OX we have a  ba b. Now b  a means b  st(b, C) = {c  C | c  b}  a for some C  B and so a  {c | C  B, c  C, b  OX, st(b, C)  a, c  b}  a.
By replacing each element c of each C  B by cc c we may assume without loss of generality that B  OX and hence that B is a base for OX.
Proposition 4.16. Given X, B and B as defined above, the completion CX has an alternative presentation with a generator [b  FB] for each b  B and the following relations:
a) [a  FB]  [b  FB] for a  b,
b) [a  FB]  [b  FB]  cBab[c  FB],
c) cC[c  FB] = 1 for each C  B,
d) [a  FB]  bB, ba[b  FB].
Proof. We first note that every generator [a  F ] in the original presentation for CX satisfies [a  F ] = bBa[b  F ]. To see this, recall that [a  F ]  aa[a  F ] by regularity and that a  a means st(a, C)  a for some C  B. Then by Cauchiness we have [a  F ]  [a  F ]  cC[c  F ] = cC[a  c  F ]. Putting these together, we find
[a  F ]  {[a  c  F ] | C  B, c  C, a  OX, st(a, C)  a}.
Now by properness (that is, condition (iii) for the presentation) we can restrict the join to the elements [a  c  F ] such that a  c. But a  c and c  C give c  st(a, C)  a and hence [a  F ]  {[c  F ] | C  B, c  C, c  a}  cBa[c  F ], as claimed.
We can use this to show the generators [b  F ] for b  B indeed satisfy the above relations required for [b  FB]. That (a) and (b) hold is immediate from (ii) and the claim above, while relation (c) follows from (iv). Finally, relation (d) follows from the regularity condition (v) and the above claim.
It remains to define [a  F ] in terms of [b  FB] show that relations (i)­(v) for the original presentation follow from (a)­(d). The claim suggests defining [a  F ] to be
bBa[b  F ]. Condition (i) says that bB[b  FB] = 1, which holds by (c) and the fact that, as a base, B is inhabited. The "" direction of (ii) follows from (a), while for the "" direction follows from (b). Condition (iii) comes from the fact that every b  B is positive. Finally, (iv) and (v) follow from (c) and (d) respectively.
5. Examples and applications
In this section we discuss the relationship between metric and uniform locales and some applications of uniform locales to localic algebra.

21

5.1. Metric locales. Classically, perhaps the most important example of uniform spaces is given by metric spaces. As one might expect, in the constructive setting metric locales also have uniform structures. Our definition of metric locales follows that of Henry in [9].

Metric locales take values in the nonnegative extended upper reals R- -0 -- the classifying

laocparleeseonftaextitoenndoefdOuRp- p-0erhDasedaekgienndercautotsr

on [0,

the set of positive rationals q) for each q  Q+ subject

Q+. Explicitly, to the relations

[0, q) = p<q[0, p).

dD:eXfin×itXion5R.1- -.0Asupcrhe-tmhaettriinc

locale is an the internal

overt locale X logic we have

equipped

with

a

locale

map

· d(x, x) = 0

(x : X),

· d(x, y) = d(y, z)

(x, y : X),

· d(x, z)  d(x, y) + d(y, z) (x, y, z : X),

where  is interpreted as the reverse of the order enrichment.

If (X, d) is a metric locale, we now attempt to define a uniformity Ed on X with basic entourages of the form Eq = d([0, q)) for each q  Q+.
Lemma 5.2. This indeed gives a pre-uniform locale (X, Ed).
Proof. Since Ep  Eq for p  q, it is clear that the basic entourages Eq form a filter base. For the reflexivity condition, we know that in the internal logic we have d(x, x) = 0 < q and hence (x, x)  Eq, as required. The symmetry condition follows from the fact that Ed is symmetric by the symmetry condition on d. Finally, we will show Eq/2  Eq/2  Eq. In the internal logic, (x, z)  Eq/2  Eq/2 means y : X. (x, y)  Eq/2  (y, z)  Eq/2. That is, d(x, y) < q/2 and d(y, z) < q/2. By the triangle inequality it follows that d(x, z)  d(x, y) + d(x, y) < q/2 + q/2 = q. Thus, (x, z)  Eq and we have shown the desired inclusion.

This construction also interacts well with morphisms of pre-metric spaces.

Definition 5.3. A map f : X  Y between pre-metric locales is nonexpansive if we have x,y : X dY (f (x), f (y))  dX(x, y) in the internal logic -- that is, if EqX  (f × f )(EqY ) for all q  Q+.

From this definition it is clear that a nonexpansive map is uniform with respect to the induced pre-uniformities. Thus, the association of the above metric uniformity to a metric locale to a uniform locale gives a forgetful functor from the category PMetLoc of premetric locales and nonexpansive maps to PUnifLoc, which commutes with the obvious forgetful functors into OLoc.

There is a relation q on pre-metric locales, the definition of which is precisely equivalent to a q b  (a  a)  Eq  b  b. Then the definition of  by a  b  q  Q+. a q b coincides with the usual uniformly below relation for the metric uniformity.

Definition 5.4. A metric locale is a pre-metric locale X for which a = ba b for all a  OX. By the above discussion, this is clearly the equivalent to the metric uniformity being admissible.

22

Thus, the forgetful functor PMetLoc  PUnifLoc restricts to a functor U from the category MetLoc of metric locales to UnifLoc.

Finally, we note that the completion of a metric locale described in [9] agrees with the completion of the underlying uniform locale in the sense that the following diagram commutes.

C

MetLoc

CMetLoc

U

U

UnifLoc C CUnifLoc
5.2. Localic groups. Another important class of examples of uniform spaces is given by topological groups. In our setting we will see that every overt localic group has a natural uniform structure.
By localic group we simply mean an internal group in Loc. More explicitly, this means we have a locale G and maps  : 1  G,  : G  G and µ : G × G  G satisfying the group axioms.
Remark 5.5. Localic groups are the pointfree analogue of topological groups. However, even though classically every T0 topological group is Tychonoff and hence sober, not every topological group is the spectrum of a localic group, since a product of two locales can diverge from that of the corresponding spaces. The difference between the two theories can be understood in terms of uniform structures: every localic group satisfies a certain completeness condition (as shown in [4] in the classical setting).
Definition 5.6. Let G be an overt localic group. The left uniformity on G is given by the following set of basic entourages: for each open neighbourhood of the identity u we define Lu to be {(x, y) : G × G | x-1y  u} in the internal logic.
The right uniformity is similar with Ru = {(x, y) : G × G | xy-1  u}. The two-sided uniformity is the join of these in the lattice of uniformities. It has a base consisting of the entourages Tu = {(x, y) : G × G | x-1y  u  xy-1  u}.
Lemma 5.7. These all define admissible uniformities on G.
Proof. We will show this for the left uniformity. The proof for the right uniformity is similar and the result for the two-sided uniformity follows from the results for the other two uniformities.
First note that {Lu | (u) = } is a filter base, since Luv = Lu  Lv. We have that each basic entourage Lu is reflexive, since x-1 · x = 1  u. For the symmetry condition it is enough to show Lou = L(u) and this holds since x-1y  u if and only if y-1x = (x-1y)-1  (u).
For the transitivity condition, we must find an open neighbourhood of the identity v such that Lv  Lv  Lu. In the internal logic, we have 1 · 1 = 1  u and so  (1, 1)  µ(u). Since elements of the form a  b form a base for O(G × G), there are a and b such that

23

(1, 1)  a  b  µ(u). Setting v = a  b it follows that 1  v and v  v  µ(u). Now take (x, y) and (y, z) in Lv. Then x-1y, y-1z  v  µ(u). Multiplying these we then have x-1z  u and so (x, z)  Lu. Thus, we have shown Lv  Lv  Lu as required.
Finally, we demonstrate admissibility. We first observe that if (u) =  and au  µ(b), then (a  a)  Lu  b  b. To see this it suffices to show y  a  y-1z  u y,z : G z  b by Lemma 2.3. Suppose y  a and y-1z  u. Then (y, y-1z)  a  u  µ(b), so that z = yy-1z  b, as required.
In particular, we have shown that if (u) =  and a  u  µ(b), then a  b. So to show admissibility, it suffices to prove that b  {a  OG | (u) = , a  u  µ(b)}. But the axiom x · 1 = x means that (OG  )µ is the canonical isomorphism OG = OG   and so
b   = (OG  )µ(b)
= (OG  ) {a  u | a  u  µ(b)}

= {a  (u) | a  u  µ(b)} = {a   | (u) = , a  u  µ(b)}

and the desired result follows.
As before we see this assignment of uniformities is functorial.
Lemma 5.8. Every homomorphism f : G  H of localic groups is uniform with respect to the left, right or two-sided uniformities.
Proof. Simply observe that (f × f )(Lu) = Lf(u) and similarly for Ru and Tu.
Thus, we obtain three functors L, R and T from the category OLocGrp of overt localic groups to UnifLoc which each commute with the forgetful functors to OLoc.
We can now proceed as in [4] to show that an overt locale localic group is complete with respect to its two-sided uniformity.
Lemma 5.9. The multiplication µ : G × G  G on an overt localic group lifts to a map µ : CG×CG  CG on the completion with respect to the left, right or two-sided uniformity.
Proof. Let us first show this for the completion with respect to the left uniformity. By Proposition 4.13 and Corollary 4.15 it suffices to show that (G ×G)µ sends entourages to reflexive relations. Here (G × G)µ(c) = {[a  F ]  [b  F ] | a  b  µ(c)} and so for each open neighbourhood of the identity u we must show

{[a  F ]  [b  F ] | a  b  a  b  (µ × µ)(Lu)} = 1.

Note that in the internal logic the inequality in above join says that

x, x  a  y, y  b x,y,x,y : G y-1x-1xy  u.

()

Consider b `sufficiently small' in the sense that b  b  Lv for some v to be determined and set w = {z : G | y~, y~ : b. y~-1zy~  v} in the internal logic. Note that  1  w.

24
Now take a  OG such that a  a  Lw. Note that since Lv and Lw are entourages taking the join of [a  F ]  [b  F ] over all such a and b gives
{[a  F ]  [b  f ] | a  a  Lwb, b  b  Lv} = {1  [b  f ] | b  b  Lv} = 1.
This will imply that the desired join is also 1 once we show that these choices for a and b satisfy condition () above. Expanding the definition of a we have x, x  a x,x : G y~, y~ : b. y~-1x-1xy~  v, which is close to the desired condition. We must just ensure that each y and y in b are close to the given y~ and y~.
Indeed, if x, x  a and y, y  b then we know there exist y~, y~  b such that (xy~, xy~)  Lv. But also, y, y~  b implies (y, y~)  Lv, which in turn gives (xy, xy~)  Lv. Similarly, (xy~, xy)  Lv. Combining these we find (xy, xy)  Lv  Lv  Lv. Choosing Lv so that Lv  Lv  Lv  Lu then yields the desired result.
Thus, we have shown (G ×G)µ sends the entourages Lu to reflexive relations. Entirely dually, the entourages Ru for the right uniformity are also sent to reflexive relations.
To prove a similar result for the basic two-sided entourages Tu = Lu  Ru, we consider both b  b  Tv and a  a  Twb as above, as well as a  a  Tv and b  b  Twa  as for the right uniformity. Then the join of [a  a  F ]  [b  b  F ] over all such a, a, b and b is again a cover, since it is the meet of two covers. Finally, for x, x  a  a and y, y  b  b, we find (xy, xy)  Lu as above and dually (xy, xy)  Ru. Thus, (xy, xy)  Lu  Ru = Tu. Thus, {[a  F ]  [b  F ] | a  b  a  b  (µ × µ)(Tu)} is also 1 and (G × G)µ sends two-sided entourages to reflexive relations. Hence µ lifts to the completion with respect to the two-sided uniformity.
Theorem 5.10. Every overt localic group G is complete with respect to its two-sided uniformity.
Proof. By the previous lemma the multiplication G lifts to the completion CG. Moreover, the inversion map  simply exchanges left and right entourages, so it uniformly continuous with respect to the two-sided uniformity and hence clearly also lifts to the completion. Of course, the unit lifts too. Since Gn is a strongly dense sublocale of (CG)n, the group axioms hold on a strongly dense sublocale of CG. But since CG is uniformisable, it is weakly Hausdorff and so the sublocale on which the axioms hold is weakly closed. Thus, they must hold everywhere.
It follows that CG is a localic group and G is a strongly dense localic subgroup. But it is well-known that an overt subgroup of a localic group is weakly closed (see [11] for a constructive proof). Thus, G = CG and G is complete.
5.3. Real numbers and the completion of rings. Another important application of completions is the construction of the localic ring of reals as the completion of the ring of rational numbers. The rationals are best viewed as a discrete locale Q. This has a pre-uniform structure which can be given by the usual Euclidean metric or directly from a base of entourages of the form Eq = {(x, x)  Q × Q | |x - x| < q} for q  Q+.
We can use Proposition 4.16 to obtain a presentation for the completion of Q. An appropriate set B of basic uniform covers consists of Cq = {(p, p + q)  Q | p  Q} for q  Q+ and where (r, s) denotes the interval of rationals lying strictly between r and s

25
(for r < s). The resulting presentation of CQ has generators ((r, s)) for r < s  Q and the relations:
· ((r, s))  ((r, s)) = ((r  r, s  s)) for r, r < s, s,
· ((r, s))  ((r, s)) = 0 otherwise,
· pQ((p, p + q)) = 1 for q > 0,
· ((r, s))  r<r<s<s((r, s)).
It is easy to see this is isomorphic to the usual frame of reals OR as presented in terms of Dedekind cuts (with generators q and uq meaning q is in the lower or upper cut respectively) via frame homomorphisms sending ((r, s)) to r  us in the one direction and sending r to s>r((r, s)) and us to r<s((r, s)) in the other direction. A proof of a similar equivalence can be found in [19, Chapter XIV, Proposition 1.2.1].
Now let us discuss the lifting of the ring operations to R. We note that the uniformity on Q is translation invariant.
Definition 5.11. A uniformity on a localic abelian group G is translation invariant if it has a base of entourages E such that (x, y)  E x,y,z : G (x + z, y + z)  E.
For translation-invariant entourage E we always have (x, y)  E x,y : G (x - y, 0)  E (by taking z = ±y). Now since u := {z : G | (z, 0)  E} is an open neighbourhood of the identity, each basic entourage in a translation-invariant uniformity is of the form Tu (the three group uniformities coincide for abelian G). In this way, a translation-invariant uniformity can be specified by giving a collection of open neighbourhoods of the identity.
The operations of a localic abelian group always respect translation-invariant pre-uniform structures.
Lemma 5.12. Let E be a translation-invariant uniformity on a localic abelian group G. Then the operations of G are uniformly continuous with respect to E.
Proof. Inversion is uniformly continuous by commutativity and it is trivial that the unit is uniformly continuous. For the addition we consider an entourage T  E and take a symmetric entourage F  E such that F  F  E. To show addition is uniformly continuous it is enough to show that (x, x), (y, y)  F x,x,y,y : G (x + y, x + y)  E. But if (x, x), (y, y)  F then (x + y, x + y)  F and (x + y, x + y)  F by translation invariance. Thus, (x + y, x + y)  F  F  E as required.
Remark 5.13. This yields an analogue of Lemma 5.9 restricted to abelian groups, but for general translation-invariant uniformities. In fact, the restriction to the abelian case is not necessary. If we define a notion of left- or right-translation-invariant uniformity on a non-abelian group G, then a simple modification of the proof of Lemma 5.9 shows that the multiplication on G lifts to the `pre-uniform completion' of G with respect to any such uniformity -- and for any uniformity with a base of entourages of the form Tu.
Corollary 5.14. The (pre-uniform) completion with respect to a translation-invariant uniformity preserves the abelian group structure of G. Moreover, this gives a reflection from the category of translation-invariant pre-uniform localic abelian groups onto the category of localic abelian groups (with their canonical group uniformities).

26
Thus, in particular the additive structure on Q extends to R. That the entire ring structure extends to R is a consequence of the following general result, which is a pointfree analogue of [5, III, §6.5, Proposition 6].
Proposition 5.15. Let R be a localic ring equipped with a pre-uniform structure that is translation invariant with respect to its additive group. Furthermore, suppose the multiplication µ× : R × R  R is `continuous at 0' with respect to the pre-uniform structure in the sense that whenever Tu is an entourage, there is an entourage Tv such that v  v  µ×(u). Then CR has the structure of a localic ring and the map RR : R  CR is a localic ring homomorphism.
Proof. It suffices to show that the multiplication lifts to the completion. Similarly to before, by Corollary 4.15 it is enough to show
{[(a)  F ]  [(b)  F ] | a  b  a  b  (µ× × µ×)(Tu)} = 1
for each basic entourage Tu. Note that the inequality can be expressed in the internal logic as x, x  a  y, y  b x,y,x,y : G xy - xy  u. Now consider the following sequence of equalities.
xy - xy = xy - xy + xy - xy = x(y - y) + (x - x)y = (x~ + x - x~)(y - y) + (x - x)(y~ + y - y~) = x~(y - y) + (x - x~)(y - y) + (x - x)y~ + (x - x)(y - y~)
By the uniform continuity of addition there is a u such that Tu is an entourage and whenever each of these terms lies in u their sum xy - xy lies in u.
Consider a  OR such that a  a  Tv for some entourage Tv to be determined later. Note that {[(a)  F ] | a  a  Tv} = 1 since Tv is an entourage. We set w = {z : R | z  v  x~ : a. x~z  u} and note that  1  w. Now take b  b  Tw. As before we find that the join of [(a)  F ]  [(b)  F ] over all such a and b is 1. In the internal logic, if x, x  a and y, y  b we have x - x, y - y  v and some x~  a such that x~(y - y)  u.
We also wish to show (x - x~)(y - y)  u. We know x - x~  v and y - y  v. Now we use `continuity at 0' to choose v such that v  v  µ×(u), which gives the desired result.
Similarly, a dual choice of a and b gives that the other two terms lie in u. Taking the meet of these two choices of a and b then means all of the terms lie in u and hence xy - xy  u. Thus, the result follows as in Lemma 5.9.
Corollary 5.16. The ring structure on Q lifts to a ring structure on R.
Proof. By the above it suffices to show the multiplication on Q is `continuous at 0'. This amounts to showing for each   Q+ there is a   Q+ such that if |x|, |y| <  then |xy| < . We can now simply take  = min(, 1) so that |xy| = |x||y| < 2   · 1 = .
Remark 5.17. We can also show in an entirely analogous way (using the p-adic absolute value) that the p-adic uniformity on Q is translation invariant and continuous at 0 and hence there is an induced localic ring structure on the resulting locale of p-adic numbers.

27
Acknowledgements. I would like to thank José Siqueira for finding an online copy of the thesis of Fox [7] for me. In case anyone else is also looking for it, it can be found on the University of Manchester Library website at https://uomlibrary.access.preservica. com/uncategorized/IO_7a11b53c-c8fb-4b0d-9d3d-ed91949d7ce0.
References
[1] J. Adámek, H. Herrlich, and G. E. Strecker. Abstract and Concrete Categories: The Joy of Cats. Dover Publications, 2009.
[2] B. Banaschewski. Compactification of frames. Math. Nachr., 149(1):105­115, 1990. [3] B. Banaschewski and C. J. Mulvey. The Stone­Cech compactification of locales, III. J. Pure Appl.
Algebra, 185(1-3):25­33, 2003. [4] B. Banaschewski and J. J. C. Vermeulen. On the completeness of localic groups. Comment. Math.
Univ. Carolin., 40(2):293­307, 1999. [5] N. Bourbaki. General Topology, Part 1. Elements of Mathematics. Herrman and Addison-Wesley,
1966. [6] G. Curi. On the collection of points of a formal space. Ann. Pure Appl. Logic, 137(1­3):126­146,
2006. [7] C. Fox. Point-set and Point-free Topology in Constructive Set Theory. PhD thesis, University of
Manchester, 2005. [8] J. L. Frith. Structured frames. PhD thesis, University of Cape Town, 1986. [9] S. Henry. Localic metric spaces and the localic Gelfand duality. Adv. Math., 294:634­688, 2016. [10] J. R. Isbell. Uniform spaces. Number 12 in Mathematical Surveys and Monographs. American
Mathematical Society, 1964. [11] P. T. Johnstone. A constructive "closed subgroup theorem" for localic groups and groupoids. Cah.
Topol. Géom. Différ. Catég., 30(1):3­23, 1989. [12] P. T. Johnstone. Fibrewise separation axioms for locales. Math. Proc. Cambridge Philos. Soc.,
108(2):247­256, 1990. [13] P. T. Johnstone. A constructive theory of uniform locales, I: uniform covers. In S. J. Andima, R. Kop-
perman, P. R. Misra, J. Z. Reichman, and A. R. Todd, editors, General topology and applications, pages 179­193. 1991. [14] P. T. Johnstone. Sketches of an Elephant: A Topos Theory Compendium, volume 2. Oxford University Press, Oxford, 2002. [15] T. Kawai. Localic completion of uniform spaces. Log. Methods Comput. Sci., 13(3), 2017. [16] M. E. Maietti and S. Valentini. A structural investigation on formal topology: coreflection of formal covers and exponentiability. J. Symbolic Logic, pages 967­1005, 2004. [17] G. Manuell. Quantalic spectra of semirings. PhD thesis, University of Edinburgh, 2019. [18] G. Manuell. The congruence biframe as a quasi-uniform bicompletion. Topology Appl., 273, 2020. [19] J. Picado and A. Pultr. Frames and Locales: Topology without points. Frontiers in Mathematics. Springer Basel, 2012. [20] A. M. Pitts. Notes on categorical logic, 1991. Unpublished lecture notes, https://www.cl.cam.ac. uk/~amp12/papers/notcl/notcl.pdf. [21] J. W. Tukey. Convergence and uniformity in topology. Princeton University Press, 1941. [22] S. Willard. General topology. Addison-Wesley Publishing Company, 1970.
Centre for Mathematics, University of Coimbra, Coimbra, Portugal
Email address: graham@manuell.me

