IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

1

An Optimal Relay Scheme for Outage Minimization in Fog-based Internet-of-Things (IoT) Networks
Babatunji Omoniwa, Riaz Hussain, Muhammad Adil, Atif Shakeel, Ahmed Kamal Tahir, Qadeer Ul Hasan, and Shahzad A. Malik

arXiv:2106.00846v1 [cs.NI] 1 Jun 2021

Abstract--Fog devices are beginning to play a key role in relaying data and services within the Internet-of-Things (IoT) ecosystem. These relays may be static or mobile, with the latter offering a new degree of freedom for performance improvement via careful relay mobility design. Besides that, power conservation has been a prevalent issue in IoT networks with devices being power-constrained, requiring optimal power-control mechanisms. In this paper, we consider a multi-tier fog-based IoT architecture where a mobile/static fog node acts as an amplify and forward relay that transmits received information from a sensor node to a higher hierarchically-placed static fog device, which offers some localized services. The outage probability of the presented scenario was efficiently minimized by jointly optimizing the mobility pattern and the transmit power of the fog relay. A closedform analytical expression for the outage probability was derived. Furthermore, due to the intractability and non-convexity of the formulated problem, we applied an iterative algorithm based on the steepest descent method to arrive at a desirable objective. Simulations reveal that the outage probability was improved by 62.7% in the optimized-location fixed-power (OLFP) scheme, 79.3% in the optimized-power fixed-location (OPFL) scheme, and 94.2% in the optimized-location optimized-power (OLOP) scheme, as against the fixed-location and fixed-power (FLFP) scheme (i.e., without optimization). Lastly, we present an optimal relay selection strategy that chooses an appropriate relay node from randomly distributed relaying candidates.
Index Terms--Fog-based IoT, outage probability, steepest descent method, non-convex optimization, optimal relay selection strategy.
I. INTRODUCTION
F OG-based Internet-of-Things (IoT) is a distributed architecture that offers localized services, which may include storage, processing, database operation, integration, security, and management to IoT end-devices, leveraging on its proximity to the edge of the network. Fog devices are notable for supporting mobility, as well as real-time processing of data and service requests from a wide variety of IoT enddevices. For example, a mobile smartphone, smart wrist-watch, or an industrial robot may become a fog device to provide local control and application data analytics to IoT end-devices within any cyber-physical system (smart transport, smart grid, smart health, smart building, etc.) [1]. Recently, Industry 4.0,
B. Omoniwa is with the Computer Science Programme, National Mathematical Centre, 118, Abuja, Nigeria, email: tunjiomoniwa@gmail.com.
R. Hussain, M. Adil, A. Shakeel, A. K. Tahir, Q. U. Hasan, and S. A. Malik are with the Department of Electrical Engineering, COMSATS University, Islamabad, Pakistan, email: {rhussain, atif shakeel, qadeer.hasan, smalik}@comsats.edu.pk, adil34700@gmail.com, ahmedkamaltahir@ieee.org
Copyright (c) 2012 IEEE. Personal use of this material is permitted. However, permission to use this material for any other purposes must be obtained from the IEEE by sending a request to pubs-permissions@ieee.org.

also known as the Industrial Internet-of-Things (IIoT), which is the computerization of the manufacturing sector (mining, textile, food, factory, etc.) [2], has witnessed rapid technological advancements with fog devices (robots) playing a vital role. With the increase in machine-type communication (MTC), the magnanimity of real-time data produced by the increasingly large number of IoT sensors will require prompt response and processing at the network edge [3]-[5]. As such, the fog-based IoT has the potential to enhance the overall performance of the IoT ecosystem, by leveraging its "things" proximity and distributed architecture to offer efficient connectivity within the network [6].
With the IoT vision of interconnecting heterogeneous devices [4], the sensor nodes which are often the primary source of sensed data within an environment, communicate wirelessly with other IoT devices, usually fog devices, in order to transmit data or control messages to a target destination. A drawback to this communication setup is that these sensors are power-constrained, and are often isolated due to sparse deployment. Moreover, these sensor nodes may at any point in time experience degraded quality of service (QoS) due to long distances or obstructions from the target destination (static fog node) as seen in Fig. 1. Due to the possibility of having no line-of-sight (LOS) communication link between the sensor node and the target destination, relays can be a viable and valuable alternative in ensuring uninterrupted communication.
Over the past decades, there have been many other applications of relays in the area of wireless communications, some in wireless sensor networks [7], vehicular delay tolerant networks (VDTN) [8], unmanned aerial vehicles (UAV) communication networks [9], [10], and relay-assisted D2D communications [11], to mention but a few. Most of these works have a singular objective of improving system performance by minimizing communication outages within the network. Relay concept is quite new, but becoming more prominent in IoT networks to assist in long-distance communication [12], with the fog playing a major role. However, mobile fog/edge nodes are often energy-constrained, unlike the static fog nodes that can be connected to a power source. With this bottleneck, it becomes necessary to implement an optimal power-control mechanism in order to minimize communication outage, as well as, utilize device power in a more efficient manner.
In reality, IoT sensors are sparsely dispersed within rooms and corridors in smart building applications, on roads and vehicles in smart transport, on patients and health facilities in smart health-care, and embedded in meters and home appliances in smart grid applications. These IoT sensor nodes

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

2

A. Related Work

Centralized Cloud Layer

Distributed Multi-Tier Fog
Layer
Static/Mobile Relay Fog Node

Static Fog Node

Realm of Things
Figure 1. Multi-tier fog architecture depicting a relay scenario within the IoT ecosystem.
may at any point in time transmit data or service-requests to a destination node via a fog relay. The success of future IoT networks will greatly depend on the way "things" are managed at multi-tier fog layers, where localized service provision can be done. A key motivation for this work is the Industry 4.0, where fog devices (industrial robots) may be used to offer intermediary services, as well as convey important information between smart industrial devices. Also, surveillance drones used in agricultural plantations, industries, car parks and militarized zones for monitoring (intelligence gathering), can also be used to relay information within the network. This surveillance drone has the ability to actively change its location to improve communication performance. This paper aims at emphasizing the importance of relays in future IoT networks.
It is pertinent to note that transmitted packets are often lost or corrupted due to error-prone links, making relay a viable choice. Another critical thing to consider, when deploying an IoT network, is minimizing the outage by providing redundant links via potential relay nodes. In a network with several active relaying candidates, an optimal choice of a relay node can significantly raise the efficiency of the network and consequently the target performance metric at the destination [7]. Recently, research efforts have intensified in the development of relay selection strategies [13]. Intuitively, a relay selection strategy is one that picks an optimal relay based on some defined objective such as minimizing the outage probability.

There are several works on the use of relays to improve communication within a network. In [7], a decentralized WSN protocol was proposed in which "proper" nodes decide to act as relays without needing any central coordinator. Derivations for the average signal-to-noise ratio (SNR) at the relays and destination were made with the assumption that the distance between the source and node and also the links between channel terminals are totally random. However, the work considers the model where each relay transmits at an equal power and has a fixed location. The work in [8] proposes a bivious relaying scheme to minimize the outage of communicating vehicles within an uncovered area between two distant neighboring Road Side Units (RSUs). Interior point algorithm was applied to the formulated problem to find the optimum speed of the target vehicle. The derived models did not consider the effect of the channel in relay selection. A repeated relay selection (RRS) technique to enhance the packet error rate (PER) performance was proposed in [9], where the forwarded data is split into multiple segments and a relay is reselected prior to the transmission of each segment based on the updated channel state information (CSI). This strategy, however, improves PER performance at the expense of fairness within the network. In [10], a joint power-control and trajectory optimization scheme for UAV relay networks was proposed. In this work, the outage probability was effectively minimized using the gradient descent algorithm. However, the work did not consider relay selection strategies in situations where multiple relay candidates exist.
There is quite a large body of work done in the area of IoT as a whole, however, works pertaining to relay in IoT is in the infancy stage. The work in [11] proposes an overlaybased green relay assisted D2D communications with dual batteries in heterogeneous cellular networks. The proposed resource allocation approach makes available the IoT services and minimizes the overall energy consumption of the picorelay base stations (BSs). It maximized the green energy usage by efficiently balancing the residual green energy among the pico relay BSs, thus, saving on-grid energy. However, the relay used was a static BS with the assumption that devices within the macrocell are fully covered, without consideration for outages in communication. A study on the degree of freedom (DoF) of the circular multi-relay multiple-input multiple-output interference (CMMI) channel from both the achievable DoF and converse analysis aspects, was presented in [12]. A general DoF achievability problem for this model was formulated based on linear processing techniques. The CMMI network model proposed can be considered as a basic component to construct the complex IoT networks. In this work, channel parameters were considered in model design with some mathematical derivations. However, the work only focused on performance optimization of MIMO multi-relay channels (mRCs). Also, further work may be required for practical implementation of this idea.
A framework was developed in [14] for wireless energy harvesting relay-assisted underlay cognitive networks (WEHRCRNs) with randomly distributed spatial nodes. The reuse of

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

3

unused spectrum for transmitting data and harvesting ambient energy for power supplies are devised as an effective approach for large-scale IoT deployments. A relay selection technique in WEH-RCRNs was proposed to select a suitable relay that will aid transmission. However, the prime focus was on energy harvesting, rather than on relay communication. The work in [15] focused on resource allocation in an OFDMA-based wireless IoT network, and also included channel assignment and power-control, in satisfying the SINR requirements. The resource allocation problem was formulated as a MixedInteger Linear Programming (MILP) problem. Furthermore, a relay-based communication model was derived and used for relay selection. The limitation of this work is that it selects the relay closest to the source as the optimal relay, which may not be valid for all cases. In [16], a novel relay policy on RF energy harvesting was proposed for IoT Networks. The network entities considered in the work were the source, relay, and destination. The impact of energy harvesting on metrics, such as network lifetime and delay were studied to arrive at the optimum relay policy. However, the work did not consider channel variation which is an indispensable feature in IoT networks.
In this backdrop, an optimal relay scheme is proposed that minimizes communication outage, and can be readily deployed by system developers to build a robust fog-based IoT network.
B. Our Work and Contributions
Our work takes into consideration mobility and powercontrol constraint in minimizing the outage probability in a fog-based IoT network. The main contributions of this paper are summarized below:
1) In our fog-based IoT relaying scenario, we employ an outage minimization technique based on the steepest descent method to solve the formulated non-convex problem, thereby considerably minimizing the outage probability from source to destination.
2) We present an iterative algorithm that efficiently minimizes the objective in three (3) proposed schemes, (a) optimized-location optimized-power (OLOP), (b) optimized-location fixed-power (OLFP), and (c) optimized-power fixed-location (OPFL) scheme, all of which yield better performance when compared with the fixed-location and fixed-power (FLFP) scheme. The choice of the scheme to be used depends on the relay design and deployment (static or mobile).
3) We propose an optimal relay selection strategy which is based on picking an appropriate link that best minimizes the outage with the least convergent value. This proposed strategy will ensure fairness and will also help in ensuring the longevity of power-constrained fog relays.
C. Paper Organization
The remainder of this paper is organized as follows. In Section II, a fog-based IoT communication system model is presented. In Section III, we propose an iterative algorithm based on the steepest descent method, which we apply to different relaying scenarios to minimize our objective. In Section

(L, 0)

Static Fog Node

Static/Mobile Relay Fog Node
(x(t), y(t))

Obstructions or large
separations

IoT Sensor Node
(0, 0)
Figure 2. System model for IoT communication using a static/mobile relay fog node.

IV, we consider a scenario where multiple relay candidates exist within the communication space, hence, we propose an optimal relay selection strategy to select an appropriate link. Results and discussions are presented in Section V. Finally, Section VI concludes the paper.

II. SYSTEM MODEL AND PROBLEM FORMULATION
In this section, we consider a scenario where an IoT sensor node (ISN) intends to transmit sensed data to a static fog node (SFN) without a line-of-sight link between them due to obstructions. As such, a relay fog node needs to be deployed to aid the communication from ISN to SFN. Unlike traditional static relaying schemes, we use a relay fog node (RFN) with some degree of freedom, that is, having the ability to change its location. The RFN acts as an amplify and forward relay to provide ubiquitous communication between the ISN and SFN. In this paper, we focus on the communication aided by the RFN and ignore the possibility of a direct communication between the ISN and SFN, with a motive to emphasize the immense benefits of relays in future IoT networks.
As shown in Fig. 2, we consider a Cartesian plane with coordinates of ISN and SFN at (0, 0) and (L, 0), respectively. We assume K time slots for the transmission phase. The coordinates of the RFN at time slot t is given as (x(t), y(t)), 0  t  K. The initial and final location of the RFN can be given as (x0, y0) and (xf , yf ), respectively. Using the coordinates, we can express the distance between the ISN and RFN as

DI = x(t)2 + y(t)2

(1)

Also, the distance between the SFN and the RFN is given as

DS = (x(t) - L)2 + y(t)2

(2)

During transmission, the RFN may dynamically adjust its location in order to improve quality of service (QoS). We

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

4

assume two successive time slots where the ISN transmits
data to the RFN in t time slot, then the RFN will amplify and
forward the received data in (t+1) time slot. In both time slots,
we assume that there is perfect synchronization between the
communicating nodes as in [17]. Now, the separation between the ISN and RFN is DIt in t time slot and DIt+1 in (t+1) time slot. Also, the separation between the SFN and RFN is DSt in t time slot and DSt+1 in (t + 1) time slot. We also assume a change in location of the relay in two consecutive time slots
as . Similarly, we denote the transmit power of the ISN and the RFN to be PIt and PRt , and PIt+1 and PRt+1, in slot time t and (t+1), respectively. Next, to derive the outage probability,
we express the received power at the RFN from the ISN in t
time slot as [10]

PRt I = PIt(DIt )-(It )2

(3)

We also express the received power at the SFN from the RFN in (t + 1) slot time as

PSt+1R = PRt+1(DSt+1)-(St+1)2,

(4)

where It and St+1 are channel coefficients of ISN to RFN and RFN to SFN, respectively, modeled as N (0, 1), and  is
the path loss exponent. We further express the received signal
at the RFN as a function of the noise component, which is modeled as N (0, N0) [13].

tR = PIt(DIt )-It It + N0tR ,

(5)

where It is the unit energy signal from the ISN, and the noise component that the RFN receives is given as N0tR . The RFN amplifies the received signal, hence, the resulting gain is
expressed as

G=

PRt+1 PIt(DIt )-(It )2 + N0

(6)

We can now express the received signal at the destination SFN as

tS+1 = G PIt(DIt )-(DSt+1)-It St+1It (7)
+ GN0tR (DSt+1)-St+1 + N0tS+1,

where N0tS+1 is the received noise at the SFN, and it is also modeled as N (0, N0). From (7), the SNR of the network is
given as

t

=

G2PIt(DIt )-(It )2(DSt+1)-(St+1)2 G2N0(DSt+1)-(St+1)2 + N0

(8)

In order to derive an expression for the outage probability Pout, we assume a predefined threshold ~. If the value t given in (8) falls below the threshold ~, then outage in communication occurs [13]. Hence, we integrate the probability density function (PDF) of t

~

Potut = P[t  ~] = f (t)dt

(9)

0

Lemma 1. The approximation for outage probability in successive time slots is given by

Potut = 1 - (1 + 22 ln ) exp

-

N0~ PIt(DIt )-

(10)

Proof. The proof is given in Appendix A.

where  = (N0~)/(PRt+1(DSt+1)-). We can now formulate the optimization problem to satisfy certain constraints. The outage probability Potut given in (10) depends on the location and transmit power in the consecutive time slots. As such, our objective will be to minimize Potut by optimizing the power and location of the RFN.

min Pt
PIt, PRt+1, DIt , DSt+1 out
s.t. PIt + PRt+1  Pmax, PIt, PRt+1  0,
  ,

(11)

where  is the mobility constraint on the RFN.

III. LOCATION AND POWER CONTROL OPTIMIZATION
Optimization techniques such as the Newton and quasiNewton methods for solving nonlinear problems are reputable for their speed of convergence if and only if a sufficiently accurate initial approximation is known, otherwise, these methods are limited if the initial approximation is not precise. However, the Steepest Descent Method (SDM) can be used to solve nonconvex optimization problems and assures convergence to a local optimum even for poor initial approximations [18].
The SDM is hugely important from a theoretical viewpoint, since it is one of the non-complex methods for which a satisfactory analysis exists. More advanced algorithms, like the ones proposed in this paper, are often motivated by an attempt to change the fundamental steepest descent technique in such a way that the new algorithm will have better convergence properties [19]. In our work, we consider the SDM shown in Algorithm 1. In the SDM, the trajectory to the solution follows a zigzag pattern [20].
Algorithm 1 Steepest Descent Method 1: data x0  Rn 2: initialize i = 0 3: top: 4: if Pout(xi)  then return stop, 5: compute search direction hi  -Pout(xi)
6: endif 7: compute the step-size: 8: i  arg min0 Pout(xi + hi) 9: set: 10: xi+1 = xi + ihi 11: goto top.

Lemma 2. If  is chosen such that Pout(xi+hi) is minimized in each iteration, then successive directions are orthogonal.
Proof. The proof is given in Appendix B.

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

5

In practice, several non-convex approaches, such as gradient descent and alternating minimization, are used to arrive at a local optimum and often outperform relaxation-based approaches in terms of speed and scalability [20], [21]. The relaxation-based approaches involve relaxing non-convex problems to convex ones and applying traditional methods to solve the relaxed optimization problem. To better capture the problem structure and eliminate approximation errors that may result from the relaxation-based approach, we employ a nonconvex approach in this paper. Considering the non-convex optimization problem in (11), we apply an iterative algorithm that is based on SDM to solve the problem in-line with the presented constraints.
Algorithm 2 show that our proposed solution can be applied in various schemes depending on the type of deployment the designer may desire. Our algorithm converges to an optimal solution whenever the fractional increase in the outage probability becomes less than a predefined tolerance . To solve for the optimal location of the RFN, we assume the powercontrol variable in (11) to be given. Thus, we now have a new expression which is also non-convex, given by

min
DIt , DSt+1

Potut

s.t.   

(12)

The expressions from (1) and (2) are inserted into (12).
Starting with a two-dimensional initial point x0 corresponding to DIt and DSt+1, we apply an iterative procedure to achieve local minimum outage. The step-size is a nonnegative scalar
minimizing Pout(xi + hi). In our work, we consider a sufficiently small step-size, such that 0 <  < L, where L is the Lipschitz constant, ( = 0.001) in Algorithm (1), which
ensures convergence to a local minima, with the gradient
outage probability -Pout in a descending direction.

Lemma 3. The formulated problem in (11) and (12) contradicts the condition for convexity, as such, it is known to be NP-hard.

Proof. The function Potut(x) is convex if Potut(x + (1 + )y)  Potut(x) + (1 + )Potut(y), (13)

 x, y and    [0, 1] [21]. Furthermore, we apply a "D-test"

for optimizing multivariate functions, which involves solving

the determinant of the Hessian matrix of Potut, Hf(x,y) =

fxx fxy

fxy fyy

, where f = Potut, and (x0, y0) is a critical point

of f . Intuitively, we see that f has a continuous second partial

derivative, such that D(x, y) = fxxfyy - fx2y.

· If D(x0, y0) > 0 and

­ if fxx(x0, y0) > 0, then f (x0, y0) is a local minimum of f ;
­ if fxx(x0, y0) < 0, then f (x0, y0) is a local maximum of f .

· If D(x0, y0) < 0 then (x0, y0) is a saddle point of f .

It is important to note that there exist optimization problems that converge to saddle points in the worst case initialization of gradient descent-based methods, rather than a local minimum

or local maximum. However, such worst-case analysis do not pose a serious concern to practitioners, as saddle points can easily be escaped under mild regularity conditions [22]. We apply the D-test, to the non-convex problem in (11), which is sufficient to show that the critical point is a local minimum.

Given the location of the relay at slot t, (11) can expressed

as

min
PIt, PRt+1

Potut

s.t. PIt + PRt+1  Pmax,

PIt, PRt+1  0

(14)

Power-control [23] can be efficiently achieved when PIt + PRt+1 = Pmax. When (14) is applied in Algorithm 2, it significantly minimizes the outage probability.

Algorithm 2 Proposed Iterative Algorithm

1: data L = 50 m, Pmax = 26 dBm 2: initialize i = 0, DIt = DSt+1 = L/2, PIt = PRt+1 =
Pmax/2,  t  {1, 3, 5, ..., K} 3: while (Potut)ith - (Potut)(i-1)th > do 4: i = i + 1
5: optimal location:
6: for t = 1 : K do

7: apply Algorithm (1) to solve (12);

8: endfor 9: optimal power: 10: for t = 1 : K do 11: apply Algorithm (1) to solve (14);

12: endfor

13: s  DesignScheme

14: switch s do

15:

case OLFP:

16:

solve optimal location;

17:

case OPFL:

18:

solve optimal power;

19:

case OLOP:

20:

jointly solve optimal location and optimal power;

21: endswitch 22: endwhile

IV. OPTIMAL RELAY SELECTION STRATEGY
In a network with several active relaying candidates, an optimal choice of a relaying node can substantially improve the efficiency of the network and consequently the desired performance metric at the destination [7]. We present a scenario shown in Fig. 3, where an IoT sensor has data to send to a destination fog device with no LOS between them. Four potential relay candidates can also be seen in the presented scenario, however, the mechanism required to select an optimal relay will depend on metric chosen by the system designer. The RFN attempts to adjust its location, or transmit power or even both in K time slots in order to minimize communication outage. The convergence value is

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

6

Potential fog candidates to relay traffic to the
SFN
R4 R1
R2 R3

Static fog node (SFN) offering localized services to the IoT devices
Obstructions or large separations

Link 1 via R1
Link 2 via R2 Link 3 via R3 Link 4 via R4

IoT sensor node capable of sending
data or service request via Relay R in Set {R1, R2,..., Rn}

Figure 3. System model for IoT communication with multiple fog relays.

attained when the outage is significantly minimized based on some pre-defined tolerance as seen in Lemma 4. In this section, we have used the convergence value as a metric to select an optimal relay (that converges fastest) from a set of potential relay candidates. We assume the convergence value to be synonymous with the counter value. Aiming to minimize the outage probability, it is intuitive to select a relay node R from a set of active fog relays Ract  Ri using an optimal strategy, where Ri is the set of all relays in the fog-based IoT network. Here, we propose a relay selection strategy that chooses the appropriate link via an optimal relay. The selection is based on the speed of potential R  Ract to converge to an optimal solution, taking into consideration mobility and power-control constraints of R  Ract. Algorithm 3 describes the proposed relay selection strategy. The flow chart can be seen in Fig. 4.

Algorithm 3 Proposed Relay Selection Strategy

1: data R  Ri,   i i = 1, 3, 5, ..., n, Ract denotes active relays, R^ denotes optimal relay

2: initialize n = 0, i = 0;

3: while ISN has data to transmit do

4: ISN sends broadcast to the Ract group

5: for Ract  Ri do

6:

compute   Convergence value

7:

Compare   Ract and find min i

8:

if min i is found && CTS flag is received then

9:

transmit via R^

10:

decrease   R = R^

11:

recompute   R  R^

12:

elseif multiple min i is found && CTS flag

is received

13:

schedule all R^ to tx in round robin manner.

14:

decrease   R = R^

15:

recompute   R  R^

16:

else

17:

freeze   R = R^ and wait for CTS flag

18:

endif

19: endfor

20: endwhile

Stop No Does ISN have data to transmit?
Yes
ISN sends broadcast to the
Ract group
Compute  for all Ract and find
min i

Lemma 4. In a fog-based IoT network with potential active relays, Ract, the relay R  Ract that minimizes the outage probability with fastest convergence is the optimal relay R^.
Proof. From (10), it can be observed that the expression for outage probability improves when we apply Algorithm 2. Hence, we can easily get the minimal iteration required R  Ract to satisfy the convergence criteria,
(Potut)ith - (Potut)(i-1)th <
As soon as an optimal relay R^  Ract is selected, all other R  Ract will deactivate their counter and wait for the next transmission phase. Furthermore, since contention occurs only at the receiver, a clear-to-send (CTS) flag from the destination also triggers each R  Ract to begin its down-counter from the initial convergence value. This proposed strategy will ensure fairness and will also help in ensuring the longevity of the power-constrained fog relay. This strategy can be better pictured with an example of four active randomly distributed relaying candidates, an IoT sensor node, and a destination fog

Is min i found and CTS flag
received?

Transmit via optimal Yes relay, decrease and
recompute counter iff relay is not optimal

No
Are multiple min i found and CTS
flag received?

Schedule to transmit in round robin via
Yes optimal relays, decrease and
recompute counter iff relay is not optimal

No

Freeze counter and wait for the CTS flag
from the SFN

Figure 4. Flow chart of the proposed relay selection strategy.

node, as can be seen in Fig. 3. For example, an IoT sensor sends an initial message to probe potential relay candidates. We also assume that the ISN intermittently sends probe packets to potential relays. This action gives the ISN the knowledge of the optimal relay (with least convergence value) to be

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

7

Table I SIMULATION PARAMETERS

Parameters
Time slots K Simulation space Distance L Maximum transmit power Pmax SNR threshold ~ Path-loss exponent  Noise power N0 Tolerance Mobility constraint 

Value
1500 50 × 35 m2 50 m 26 dBm 0 dB 4 -96 dBm -10-2 0.01 m

used in that transmission phase. Applying Algorithm 3, given four Ract with convergence value  = {36, 11, 7, 63} corresponding to Ract = {R1, R2, R3, R4}. Intuitively, R3 will be selected and all other R  Ract that were not selected will freeze their counter and wait for a CTS flag from the destination (SFN). This CTS flag sent by the SFN indicates that the previous transmission is complete. Prior to receiving the CTS flag, the R  Ract that were not selected can go to an idle state to minimize energy consumption. As soon as the CTS flag is received by all R  Ract, they all begin to decrease their counters and wait for any data to be relayed from the IoT sensor. However, the R^ selected in the previous transmission phase will recompute a new value based on the convergence criteria. For instance, prior to the second transmission phase when all R  Ract receive a CTS flag, we assume a case where all relay candidates decrease their counter by 5 before receiving a CTS flag, and R3 which was previously selected as the optimal relay R^ now recomputes its convergence time value to be 7. The new set of convergence values will be updated as  = {31, 6, 7, 58} corresponding to Ract = {R1, R2, R3, R4}. Algorithm 3 stipulates that R3 which was selected as the optimal relay in the previous transmission will not decrease its counter value. The motivation for this mechanism is to allow for fairness and energy balance among potential fog relays. In this case, R2 will be selected as R^ in the second transmission phase. In a situation where two or more R  Ract have same convergence value, each will relay in consecutive transmission phase in a round robin manner. This procedure efficiently selects the optimal link with an attempt to also achieve fairness and energy balance within the IoT environment. We aim at enhancing this strategy to become a full-fledged MAC layer protocol for IoT communication in our future work.
V. RESULTS
In this section, the outage minimization is evaluated through simulations, which were carried out using MATLAB. To demonstrate the efficiency of the proposed iterative algorithm using the steepest descent method, the optimized-location optimized-power (OLOP) scheme was compared with three other schemes, the optimized-location fixed-power (OLFP), the optimized-power fixed-location (OPFL), and the fixedlocation and fixed-power (FLFP).
The simulation parameters are summarized in Table I. The transmit power P , noise power N0, and other parameters used

0.12 0.1

Optimized location Optimized power (OLOP) Optimized location fixed power (OLFP) Optimized power fixed location(OPFL) Fixed location fixed power (FLFP)

Outage probability, Pout

0.08

0.06

0.04

0.02

0

200

400

600

800

1000

1200

1400

Time slot, K

Figure 5. Time slot, K vs. Outage probability, Pout.

in the simulation is motivated by existing works [24], [25]. In the FLFP scheme, the transmit power of the ISN and RFN is kept constant and there is also no attempt by the RFN to adjust its location for improved QoS, we observe from Fig. 5 that the outage probability was not minimized during the entire time slot K. This approach has been used in modeling several relay networks [11], [13]. In the OLFP scheme, the transmit powers of the ISN and MFRN are fixed at certain values, this implies that the RFN is assumed to be mobile and searches for the optimal location that will minimize the communication outage, we can observe a better improvement in the outage probability of about 62.7% as compared to FLFP. In the OPFL scheme, the location of the RFN is fixed with the assumption of a static relay, while the devices regularly adjust their power levels to minimize the communication outage. As seen in Fig. 5, the OPFL scheme gives better performance as compared with the FLFP and the OLFP, however, more power may be required to deliver a certain level of QoS. In OPLF, we observed an improvement of about 79.3% as compared to FLFP. In the OLOP scheme, both the location and transmit power of the relay can be adjusted. From Algorithm 2, the OLOP scheme jointly optimizes location and power in order to minimize the objective function. Fig. 5 show the efficiency of OLOP as compared to all other schemes. The outage probability was minimized by 94.2% as compared to the FLFP scheme.
Fig. 6 show the minimum outage probability when plotted against the transmit power of the RFN. Since our proposed solution used significantly large number of transmission time slots, K for the RFN to achieve the minimum outage probability, we employed the brute-force searching algorithm to obtain the outage probability using about 800 power-control and 3000 RFN location possibilities. We observe that the brute-force search which systematically enumerates all possible candidates for the solution and checks whether each candidate satisfies the constraints, yielded a performance improvement of about 7% when compared with the proposed solution. It can also be seen that as PRt+1  0, the outage becomes certain, likewise, as PRt+1  Pmax the outage also becomes certain. In essence, we observe convexity of the outage probability function with respect to PRt+1. From the results in Fig. 6, we can obtain the value of PRt+1 that gives the minimum

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

8

0.09 0.08

L=50m, Proposed solution L=50m, Brute-force search L=48m, Proposed solution L=48m, Brute-force search

Outage probability, Pout

0.07

0.06

0.05

0.04

0.1

0.15

0.2

0.25

0.3

0.35

Relay transmit power, Pt+1, Watts
R

Figure 6. RFN transmit power PRt+1 vs. Outage probability, Pout.

0.14 0.12
0.1

Proposed solution, Pmax=0.398W Brute-force search, P =0.398W
max
Proposed solution, P =0.794W
max
Brute-force search, P =0.794W
max

Minimum outage probability

0.08

0.06

0.04

0.02

40

45

50

55

60

65

70

ISN-SFN Distance (L), m

Figure 7. ISN-SFN Distance, L vs. Minimum outage probability.

0.1 0.09 0.08

Link via Relay 1 Link via Relay 2 Link via Relay 3 Link via Relay 4

OLFP Outage probability, Pout

0.07

0.06

0.05

0.04

0.03 50 100 150 200 250 300 350 400 450 500 550 600
Time slot, K
Figure 8. Time slot, K vs. Outage probability, Pout using the OLFP scheme.

0.09 0.08 0.07

Link via Relay 1 Link via Relay 2 Link via Relay 3 Link via Relay 4

OPFL Outage probability, Pout

0.06

0.05

0.04

0.03

0.02 50 100 150 200 250 300 350 400 450 500 550 600
Time slot, K
Figure 9. Time slot, K vs. Outage probability, Pout using the OPFL scheme.

outage, that value is regarded as the optimal transmit power at that given separation L between the source and destination. Furthermore, we also observe that as the separation between the ISN and the SFN drops from 50 m to 48 m, the outage probability drops, thus, this implies higher outages for larger values of L. Fig. 7 illustrates the behavior of the minimum outage probability when the separation between the ISN and the SFN changes. We observe a monotonic increase in the outage probability as L increases. This implies that distance between the source ISN and destination becomes large, higher communication outage will be experienced, thus, validating the results in Fig. 6. Similarly, we observe that the brute-force search yielded about 6% performance improvement.
In Fig. 8, Fig. 9 and Fig. 10, we examine the link behavior of the proposed schemes using a four (4) relay scenario. Results in Fig. 10 show the best convergence with most minimal outage as compared to the OLFP and OPFL schemes. However, we observe that the initial convergence rate of all four relays is closely matched. The same can be seen in Fig. 9 where all relays have almost same initial convergence rate. On the contrary, Fig. 8 show quite unique, but poor initial convergence rate for each relay. This may be as a result of

the adjustment of its position to minimize outage. In general, at the time slot, K = 600 all the four relays can be seen to converge in each of the schemes. The choice of the scheme to be used may depend on the fog-based IoT design requirements. This may also depend on the computational complexity of the chosen scheme.
In order to illustrate our proposed relay selection strategy, we have chosen the OLPF scheme with randomly deployed fog relays. Fig. 11 (a) show the convergence behaviour for each link in a two relay scenario. We modeled the region of potential relay candidates to be a semicircle of diameter 50 m, between the ISN and SFN. The relays are then randomly deployed within the region of potential relay candidates as shown in Fig. 3. We then examined the performance of each relay using the convergence criteria. We can see in Fig. 11 (b) that R1 converged faster than R2 in that particular scenario. This implies that the link via R1 will be selected during that transmission phase. The proposed algorithm for relay selection can be further applied to ensure fairness and energy balance within the system. Similarly, Fig. 12 (a) and Fig. 13 (a) show the convergence behaviour for three and four relay scenario, respectively. The random deployment of these scenarios can

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

9

OLOP Outage probability, Pout

0.08 0.07 0.06

Link via Relay 1 Link via Relay 2 Link via Relay 3 Link via Relay 4

0.05

0.04

0.03

0.02

0.01
50 100 150 200 250 300 350 400 450 500 550 600
Time slot, K

Pout

y-axis

0.1 0.08 0.06 0.04 0.02
100

50 R = 201

40

R1 = 210
2

30

20

10

ISN

0

0

10

(a)
Link via Relay 1 Link via Relay 2 Link via Relay 3

200

300

400

500

600

Time slot, K

(b)

R = 166
3

Optimal Convergence = 166

R

R

1

2

R
3
SFN

20

30

40

50

x-axis

Figure 10. Time slot, K vs. Outage probability, Pout using the OLOP scheme.

Figure 12. Three Relay Scenario (a) Convergence behaviour for each link using the OLFP scheme, (b) Optimal selection of randomly deployed fog relays.

Pout

0.1 0.08 0.06 0.04 0.02
100

50 R = 173

40

R1 = 204
2

30

20

10

ISN

0

0

10

(a)
Link via Relay 1 Link via Relay 2

200

300

400

500

600

Time slot, K

(b)

Optimal Convergence = 173

R
2

R
1

20

30

40

x-axis

SFN
50-

y-axis

Figure 11. Two Relay Scenario (a) Convergence behaviour for each link using the OLFP scheme, (b) Optimal selection of randomly deployed fog relays.

Pout

0.1 0.08 0.06

(a)
Link via Relay 1 Link via Relay 2 Link via Relay 3 Link via Relay 4

0.04

0.02

100

200

300

400

500

600

Time slot, K

(b)

50 R = 187 R = 169

40

R1 = 198
2

R3 = 208
4

Optimal Convergence = 169

30

R
2

R
1

20

R

R
3

4

10

ISN

0

0

10

20

30

40

SFN 50

x-axis

y-axis

Figure 13. Four Relay Scenario (a) Convergence behaviour for each link using the OLFP scheme, (b) Optimal selection of randomly deployed fog relays.

be seen in Fig. 12 (b) and Fig. 13 (b), with the optimal relay selected in each case. From Fig. 11, Fig. 12 and Fig. 13, we observe that the RFN closer to SFN is selected, which may be due to smaller communication outage experienced in the (t + 1) time slot when the optimal relay is used. The proposed strategy can be applied to large scale fog-based networks where multiple fog devices could be used as potential relays to forward traffic from source to destination.
VI. CONCLUSION
In this paper, we analyzed the outage performance of relays in a fog-based IoT Network. Firstly, the outage probability of the presented system model was derived, leading to the formulation of the non-convex optimization problem. We presented three design schemes using the steepest descent method to ensure that the outage probability is minimized. Simulations reveal that the joint location and transmit powercontrol optimization of the relay significantly minimized the communication outage within the fog-based IoT network. Moreover, since the proposed scheme can be readily deployed, the system designer may opt for any of the proposed schemes,

depending on the design requirements. Secondly, an optimal relay selection algorithm was proposed to select an optimal link using the convergence criteria from potential relay candidates. This proposed strategy will not only select an optimal link, but will ensure fairness and longevity of the power-constrained fog relay. Our future work will consider incorporating the proposed mechanism into a MAC protocol for fog-based IoT networks.

APPENDIX A PROOF OF LEMMA 1

From (8), we further simplify the expression t, given by

t

=

cPRt I PSt+1R cPSt+1RN0 + N0

(15)

where c = G2/PRt+1. We have that PRt I and PSt+1R follows an exponential distribution based on the physical characteris-
tics of the model considered. According to (8) and (15), the

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

10

predefined threshold of the outage can be expressed in terms of some independent variables Q and Z,

Potut = P(PRt I  Q + Z)

(16)

where Q = N0~ and Z = N0~/cPSt+1R. Let  = PIt(DIt )-, we now get the outage probability, expressed as the average value over all realizations of P(PRt I  Q + Z), as

Potut = E {P(PRt I  q + z|q + z)}
Q+Z

q+z exp - x/

=E
Q+Z 0

dx 

(17)

-(q + z)

= E 1 - exp
Q+Z



= 1 - exp

-(N0~) 

·E
Z

exp

-Z 

In order to find the expected value of the function of Z, we first find the pdf of Z. We note that since Z = N0~/cPSt+1R, we can find the pdf of Z by first finding the pdf of PSt+1R. This can be seen in the transformation

fZ (z)

=

N0~ cz2

·

1 

exp

- N0~ cz

(18)

where  = PRt+1(DSt+1)-, the outage probability can be expressed as

Potut

=

1

-

1 

exp

- N0~ 

+

×

exp

0

z 

· exp

- N0~ cz

·

N0~ cz2

dz

(19)

Potut = 1 - exp

- N0~ 

· 2B-1(2)

(20)

 = N0~( + N0)



where B-1 is the first order negative modified Bessel function
of the second type, which has the property B-1 = B1,
expandable as B1(x) 1/x + (x/2)ln(x/2) [26]. Hence, the analytical approximation for the outage probability Potut is given in (10). This completes the proof.

APPENDIX B PROOF OF LEMMA 2

If  is chosen such that Pout(xi + hi) is minimized in each iteration, then successive directions are orthogonal [27]. Hence, we show that

dPout(xi + hi) = n Pout(xi + hi) (xi + hi)

d

j=1

xij

d

n

(21)

= j (xi + hi)hij

j=1

= (xi + hi)T

where (xi + hi) is the gradient at point xi + hi. If ^ is the value of  that minimizes Pout(xi + hi) then

(xi + ^hi)T hi = 0

or

(22)

hTi+1 · hi = 0

where the steepest-descent direction at the point xi + ^hi is

given by

hi+1 = -(xi + ^hi)

(23)

As such, successive directions hi and hi+1 are orthogonal. This completes the proof.

REFERENCES
[1] J. Pan and J. McElhannon, "Future Edge Cloud and Edge Computing for Internet of Things Applications," IEEE Internet of Things Journal, vol. 5, no. 1, pp. 439-449, Feb. 2018.
[2] M. Aazam, S. Zeadally and K. A. Harras, "Deploying Fog Computing in Industrial Internet of Things and Industry 4.0," IEEE Transactions on Industrial Informatics, vol. 14, no. 10, pp. 4674-4682, Oct. 2018.
[3] M. Chiang and T. Zhang, "Fog and IoT: An Overview of Research Opportuinities," IEEE Internet of Things, vol. 3, no. 6, pp. 854-864, Dec. 2016.
[4] J. Lin, W. Yu, N. Zhang, X. Yang, H. Zhang, and W. Zhao, "A Survey on Internet of Things: Architecture, Enabling Technologies, Security and Privacy, and Applications," IEEE Internet of Things, vol. 4, no. 5, pp. 1125-1142, Oct. 2017.
[5] L. Yu, T. Jiang, and Y. Zou, "Fog-Assisted Operational Cost Reduction for Cloud Data Centers," IEEE Access, vol. 5, pp. 13578-13586, July 2017.
[6] L. Liu, Z. Chang, X. Guo, S. Mao, and T. Ristaniemi, "Multiobjective Optimization for Computation Offloading in Fog Computing," IEEE Internet of Things Journal, vol. 5, no. 1, pp. 283-294, Feb. 2018.
[7] F. Etezadi, K. Zarifi, A. Ghrayeb, and S. Affes, "Decentralized Relay Selection Schemes in Uniformly Distributed Wireless Sensor Networks," IEEE Transactions on Wireless Communications, vol. 11, no. 3, pp. 938951, Mar. 2012.
[8] S. H. Bouk, S. H. Ahmed, B. Omoniwa, and D. Kim, "Outage minimization using bivious relaying scheme in vehicular delay tolerant networks," Wireless Pers. Commun., vol. 84, no. 4, pp. 2679-2692, Oct. 2015.
[9] K. Geng, Q. Gao, L. Fei, and H. Xiong, "Relay selection in cooperative communication systems over continuous time-varying fading channel," Chinese Journal of Aeronautics, vol. 30, no. 1, pp. 391-398, Feb. 2017.
[10] S. Zhang, H. Zhang, Q. He, K. Bian, and L. Song, "Joint Trajectory and Power Optimization for UAV Relay Networks," IEEE Communications Letters, vol. 22, no. 1, pp. 161-164, Jan. 2018.
[11] X. Liu and N. Ansari, "Green Relay Assisted D2D Communications With Dual Batteries in Heterogeneous Cellular Networks for IoT," IEEE Internet of Things Journal, vol. 4, no. 5, pp. 1707-1715, Oct. 2017.
[12] W. Lv, R. Wang, J. Wu, J. Xu, P. Li, and J. Dou, "Degrees of Freedom of the Circular Multi-relay MIMO Interference Channel in IoT Networks," IEEE Internet of Things Journal, vol. 5, no. 3, pp. 1957-1966, June 2018.
[13] A. H. Mohammed, B. Dai, B. Huang, M. Azhar, G. Xu, P. Qin, and S. Yu, "A survey and tutorial of wireless relay network protocols based on network coding," Journal of Network and Computer Applications, vol. 36, pp. 593­610, Mar. 2013.
[14] Z. Yan, S. Chen, X. Zhang, and H. L. Liu, "Outage Performance Analysis of Wireless Energy Harvesting Relay-Assisted Random Underlay Cognitive Networks," IEEE Internet of Things Journal, vol. 5, no. 4, pp. 2691-2699, Aug. 2018.
[15] M. Shokrnezhad and S. Khorsandi, "On the Performance Improvement of IoT Networks Using Relay-Based Communications," in 2016 International Conference on Information Technology (ICIT), Bhubaneswar, pp. 17-22, Dec. 2016.
[16] Z. Behdad, M. Mahdavi, and N. Razmi, "A new Relay Policy in RF Energy Harvesting for IoT Networks-A Cooperative Network Approach," IEEE Internet of Things Journal, vol. 5, no. 4, pp. 2715-2728, Aug. 2018.
[17] S. Zhang, B. Di, L. Song, and Y. Li, "Sub-Channel and Power Allocation for Non-Orthogonal Multiple Access Relay Networks With Amplify-andForward Protocol," IEEE Transactions on Wireless Communications, vol. 16, no. 4, pp. 2249-2261, April 2017.

IEEE INTERNET OF THINGS JOURNAL, VOL. X, NO. X, AUGUST 2018

11

[18] R. L. Burden and J. D. Faires, Numerical Analysis, 9th Edition, CA, USA: Brooks/Cole, 2011.
[19] D. G. Luenberger and Y. Ye, Linear and Nonlinear Programming, 3rd Edition, New York, USA: Springer, 2008.
[20] A. Antoniou and W.-S. Lu, Practical Optimization: Algorithms and Engineering Applications, New York, USA: Springer, 2007.
[21] S. Boyd and L. Vandenberghe, Convex Optimization, Cambrigde, UK: Cambridge University Press, 2013.
[22] J. D. Lee, M. Simchowitz, M. I. Jordan and B. Recht, "Gradient Descent Only Converges to Minimizers," in 29th Annual Conference on Learning Theory, New York City, USA, pp. 1246-1257, June 2016.
[23] S. Zhou, T. Chen, W. Chen, and Z. Niu, "Outage Minimization for a Fading Wireless Link With Energy Harvesting Transmitter and Receiver," IEEE Journal on Selected Areas in Communications, vol. 33, no. 3, pp. 496-511, Mar. 2015.
[24] P. Joshi, D. Colombi, B. Thors, L. E. Larsson, and C. Tornevik, "Output Power Levels of 4G User Equipment and Implications on Realistic RF EMF Exposure Assessments," IEEE Access, vol. 5, pp. 4545-4550, 2017.
[25] A. H. Sodhro, S. Pirbhulal, A. K. Sangaiah, S. Lohano, G. H. Sodhro, and Z. Luo, "5G-Based Transmission Power Control Mechanism in Fog Computing for Internet of Things Devices," Sustainability, vol. 10, no. 1258, pp. 1-17, 2018.
[26] Y. L. Luke, Integrals of Bessel Functions, New York, USA: McGrawHill, 1962.
[27] X. Wang, "Method of steepest descent and its application," IEEE Microwave and Wireless Components Letters, vol. 12, pp. 24-26, Nov. 2008.

