INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES
ANDREJ BAUER Andrej Bauer, Faculty of Mathematics and Physics, University of Ljubljana, Slovenia e-mail address: Andrej.Bauer@andrej.com

arXiv:2106.01734v1 [math.LO] 3 Jun 2021

ABSTRACT. We identify a notion of reducibility between predicates, called instance reducibility, which commonly appears in reverse constructive mathematics. The notion can be generally used to compare and classify various principles studied in reverse constructive mathematics (formal Church's thesis, Brouwer's Continuity principle and Fan theorem, Excluded middle, Limited principle, Function choice, Markov's principle, etc.). We show that the instance degrees form a frame, i.e., a complete lattice in which set-indexed infima distribute over suprema. They turn out to be equivalent to the frame of upper sets of truth values, ordered by the reverse Smyth partial order. We study the overall structure of the lattice: the subobject classifier embeds into the lattice in two different ways, one monotone and the other anti-monotone, and the ¬¬-dense degrees coincide with those that are reducible to Excluded middle.
We give an explicit formulation of instance degrees in a relative realizability topos, and call these extended Weihrauch degrees because in Kleene-Vesley realizability the ¬¬-dense modest instance degrees correspond precisely to Weihrauch degrees. The extended degrees improve the structure of Weihrauch degrees by equipping them with computable infima and suprema, an implication, the ability to control access to parameters and computation of results, and by generally widening the scope of Weihrauch reducibility.
1. INTRODUCTION
A common way of proving an implication between two universally quantified statements,
(y  B . (y)) = (x  A . (x)),
is to show that for every x  A there exists y  B such that (y) implies (x). The technique is prevalent in constructive reverse mathematics where we compare undecided universally quantified statements. For example, the total ordering of reals implies the Limited principle of omniscience (LPO),
(x, y  R . x  y  y < x) = (  2N . (n . n = 0))  (n . n = 1), by such a reduction: given   2N, construct the real x = limn 2-min{kN|k=1k=n} and note that x  0  0 < x implies (n . n = 0)  (n . n = 1). One can find many other examples of the method, which therefore deserves to be named.
Let us write   A to indicate that  is a predicate on A.
This material is based upon work supported by the Air Force Office of Scientific Research under award number FA9550-21-1-0024.

Preprint submitted to Logical Methods in Computer Science

© Andrej Bauer CC Creative Commons

2

ANDREJ BAUER

Definition 1.1. A predicate   A is instance reducible to a predicate   B, written (, A) I

(, B) or just  I , when

x  A . y  B . (y)  (x).

(1.1)

We say that  and  are instance equivalent, written (, A) I (, A) or just  I , when  I  and  I . The equivalence class of a predicate  with respect to I is its instance degree.

It is clear that I is a preorder (reflexive and transitive) in which harder problems are higher up. There is no shortage of instance degrees, just consider the principles that are commonly studied form a constructive point of view: Excluded Middle and its various special cases, such as the Limited Principle of Omniscience (LPO), Brouwer's Fan and Continuity Principles, Markov Principle, Church's Thesis, etc. The relationships between these are well-known [3], and shall not be rehashed here.

Overview. We study the structure of instance reducibilities in Section 2, where we show that they form a frame and enjoy a rich structure. In Section 3, after a brief overview of relative realizability models, we calculate the interpretation of instance reducibility in such models. It turns out that in Kleene-Vesley realizability instance reducibility is a generalization of Weihrauch reducibility. In Section 4 we study several examples that demonstrate how the extended Weihrauch reducibility increases the scope of the subject.

2. INSTANCE REDUCIBILITY
In this section we work in intuitionistic logic, without countable choice. All arguments may be interpreted in the internal language of an elementary topos.
2.1. Instance degrees and the Smyth preorder. The instance degrees form a large preorder whose carrier is the proper class of all predicates on all sets. Let us first show that the order is essentially small, i.e., it is equivalent to a small one.
In a partially ordered set (L, ), the upper closure of S  L is the set S = {y  L | x  S . x  y}.
The Smyth preorder [5] on the powerset P(L) is defined by S S T  S  T,
or equivalently x  S . y  T . y  x. (Beware, the Smyth preorder is normally defined in the opposite way, but we prefer to turn it upside down to match harder instances being higher up.)
Theorem 2.1. The preorder of instance reducibilities is equivalent to the Smyth preorder on P().
Proof. A predicate   A corresponds to its image im() = {p   | x  A . p = (x)}  P().
Conversely, S   corresponds to the predicate S  S classified by the inclusion, S(p) = p. One checks easily that these correspondences are monotone with respect to instance reducibility and the Smyth preorder, and that they constitute an equivalence.

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

3

The collection U (L) = {S  L | S = S} of the upper sets ordered by  is a frame in which infima and suprema are computed as intersections and unions, respectively. Upper closure  : P(L)  U (L) is the poset reflection of the Smyth preorder. The preorder of instance reducibilities is therefore equivalent to the frame U (), and in a sense that is all that needs to be said. Nevertheless,
let us spell out the ordered-theoretic structure of instance degrees directly in terms of predicates, and
study it a bit more closely.

2.2. Transfer of predicates along maps. It often happens that a reduction (, A) I (, B) is accomplished by means of a map f : A  B such that (f (x))  (x) for all x  A, in which case we say that f witnesses the reduction  I . Not all reductions need be witnessed by maps,
for in general there may be no choice map for (1.1). A predicate   B may be transferred along a map f : A  B to a predicate f   A,

defined by

(f )(x)  (f (x)).

In the other direction, a predicate   A may be transferred to one on B in two ways, using either the existential or the universal quantifier, to give predicates f   B and f   B, defined by

(f )(y)  x  A . f (x) = y  (x)

(f )(y)  x  A . f (x) = y  (x).

Lemma 2.2. Let f : A  B be a map,   A and   B. Then f  I  and  I f . If f is surjective then also  I f  and f  I .

Proof. The first two reductions are witnessed by f . If f is surjective then we obtain the remaining two reductions by reducing y  B to x  A such that f (x) = y.

When the map f in the previous lemma is a projection 1 : A × B  B and A is inhabited, we obtain for any   A × B
(1) I  I (1 ),
which is more memorable with the abuse notation

(x  A . (x, y)) I (x, y) I (x  A . (x, y)).

2.3. The order-theoretic structure. By Theorem 2.1 the instance degrees form a frame, whose structure we describe explicitly in this section.
Proposition 2.3. The instance degrees form a bounded distributive lattice.
Proof. The empty predicate    on the empty set is instance reducible to every other predicate and so it represents the smallest instance degree .
The largest instance degree  is represented by the empty predicate   1 on the singleton 1 = {}, or more generally by any predicate   A with a counter-example, which is a  A such that ¬(a).
The supremum of   A and   B is the predicate   , defined as follows. Let A + B be the disjoint union with canonical inclusions 1 : A  A + B and 2 : B  A + B. Define    on A + B by
(  )(1(x))  (x) and (  )(2(y))  (y).
The reductions of  and  to    are witnessed by the canonical inclusions.

4

ANDREJ BAUER

The infimum of   A and   B is the predicate     A × B, defined by (  )(x, y)  (x)  (y).
The canonical projections witness reductions of    to  and . The distributivity laws are easily checked. We only indicate how to prove
(  )   I (  )  (  ), for all   A,   B, and   C. The reduction is witnessed by the canonical isomorphism (A + B) × C  (A × C) + (B × C) so long as, for any x  A, y  B, and z  C,
((x)  (z))  ((x)  (z)) implies ((x)  (y))  (z),

which is just distributivity of disjunction over conjunction.

Proposition 2.4. The instance degrees form a Heyting algebra.

Proof. We only have to define implication. Given   A and   B, define the set
(A  B) = {p   | x  A . y  B . (y)  (x)  p},
and the predicate    on A  B by (  )(p) = p. We need to show that, for all   C,
   I  if and only if  I   .
To see that    I  implies  I   , it suffices to check that for any z  C we have (z)  A  B, which follows directly from the definition of    and    I .
Conversely, suppose  I   . Consider any z  C and x  A. There is p  A  B such that p  (z). By definition of A  B there is y  B such that (y)  (x)  p, and hence (y)  (x)  (y), as required.

The preceding construction of implication is quite obviously just a dressed up version of implication in U (). It would be desirable to have a more direct description.

Proposition 2.5. For every set I, the instance degrees have I-indexed suprema.

Proof. Let i  Ai be a family of predicates indexed by i  I. We claim that the supremum of the family is the predicate iI i on the coproduct iI Ai, defined by
( iI i)(u)  i  I . x  Ai . u = i(x)  i(x), where i : Ai  iI Ai is the i-th canonical inclusion.
For any j  I, the reduction j I iI i is witnessed by j, so ii is an upper bound of all the i's. To prove it is the least upper bound, consider any common upper bound   C of the predicates i. Given any u  i Ai there are (unique) j  I and x  Aj such that u = j(x). Because j I  there is y  C such that (y)  j(x), therefore (y)  ( ii)(u) and hence
ii I , as required.
Proposition 2.6. For every set I, the instance degrees have I-indexed infima.

Proof. Let i  Ai be a family of predicates indexed by i  I. For the underlying set of the infimum of the family we take the product iI P+(Ai), where P+(X) is the set of all inhabited subsets of X. We define the predicate iI i by

( iI i)(f )  i  I . x  f (i) . i(x).

(2.1)

For any j  I, the reduction iI i I j is proved as follows. Given any f  iI P+(Ai), there exists x  f (j) because f (j) is inhabited. If j(x) then ( iI i)(f ) by (2.1).

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

5

To prove that iI i is the greatest lower bound, consider any common lower bound   B of the predicates i. The desired reduction  I iI i is witnessed by the map r : B 
iI P+(Ai), defined by r(z)(i) = {x  Ai | i(x)  (z)}.
For every i  I, r(z)(i) is inhabited because  I i and so there is x  Ai such that i(x) implies (z). The map r witnesses the reduction because, for any z  B, if ( iI i)(r(z)) then there exists i  I and x  r(z)(i) such that i(x), but then (z) follows because i(x)  (z) by the definition of r.

2.4. Instance reducibilities and projective sets. Recall that I is a projective set when every Iindexed family (Ai)iI of inhabited sets has a choice function, i.e., the product iI Ai is inhabited. Equivalently, a set I is projective if every total relation on I has a choice function:
(i  I . x  A . (i, x))  f : AI . i  I . (i, f (i)).

In Section 3 we shall interpret instance reducibility in realizability toposes, which validate Aczel's presentation axiom [1]. "Every set is the image of a projective set." It will be useful to know a couple of consequence of Aczel's axiom.

Proposition 2.7. If the presentation axiom holds then every predicate is instance equivalent to a predicate on a projective set.
Proof. If   A and e : B  A is a cover of A by a projective set B, then  I e by Lemma 2.2.

When an infimum is indexed by a projective set, a simpler formula than the one given in Propo-

sition 2.6 can be used. Given a family of predicates i  Ai indexed by i  I with I projective,

define the predicate

 iI

i

on

the

product

iI Ai by

(

 iI

i)(f

)



i  I . i(f (i)).

We claim that

 iI

i

I

iI i. The reduction

 iI

i

I

iI i is witnessed by the map

which takes f  iI Ai to the map i  {f (i)}. For the opposite reduction, consider any g 

iI P+(Ai). Because I is projective there is a choice map c  iI Ai such that c(i)  g(i)

for all i  I. If there is j  I such that j(c(j)) then ( iI Ai)(g) holds because j and c(j)

witness (2.1) for g.

2.5. Reduction to many instances. Occasionally a single instance of  to many instances of . Such variants are captured by the following operation.
Definition 2.8. For any set I and a predicate   A define the I-parameterization of  to be the predicate (I)  AI defined on the set AI of all functions from I to A by
(I)(f )  i  I . (f (i)).
Proposition 2.9. The following hold for all   A and   B: (1) If I is inhabited then  I (I). (2) If I is a retract of J then (I)  (J). (3) If I is projective then  I  implies (I) I (J). In particular, I-parameterization is a closure operator when I is inhabited and projective.

6

ANDREJ BAUER

Proof. The first statement is witnessed by the map taking x  A to the constant map i  x. The second statement is witnessed by the map taking f  AI to f  r  AJ , where r : J  I is a retraction, so that it has a right inverse s : I  J. To verify the third statement, consider any f  AI .
Since I is projective and  I  is assumed, there exists g : I  B such that (g(i))  (f (i)) for all i  I, hence (I)(g)  (I)(f ).

A reduction of   A to   B which uses a fixed number n of instances of  for every instance of  is just instance reducibility of  to ([n]) where [n] = {1, . . . , n} because  I ([n])

unfolds to

x  A . y1, . . . , yn  B . (y1)  · · ·  (yn)  (x).

This is not to be confused with the reduction of (x) to a variable finite number n of instances

(y1), . . . , (yn), which is expressed as

 I nN([n]),

as it unfolds to

x  A . n  N . y1, . . . , yn  B . (y1)  · · ·  (yn)  (x).
A third possibility is  I (N) which reduces an instance (x) to countably many instances (y0), (y1), (y2), . . .
In the Smyth preorder on P() the I-parameterization is easily seen to amount to passing to I-indexed intersections: the I-parameterization of S  P() is
S(I) = {p   | f  AI . p  i  I . f (i)}.

2.6. Embedding of truth values. Given any set A let A be the always true predicate on A, and let 1 = {} be the singleton set containing the element . For each truth value p   define its extent p = {x  1 | p}.

Proposition 2.10. The principal ideal of instance degrees below 1 is equivalent to the poset  of truth values, ordered by implication .

Proof. First observe that, for a predicate   A, the reduction  I 1 is equivalent to x  A . (x), therefore the predicates below 1 are precisely those of the form A.
The desired equivalence of posets is established by the maps

pp

and A  (x  A . )

of truth values to instance degrees, and vice versa. Indeed, the maps are monotone with respect to  and I, and it is easy to check that

p  (x  p . ) and  xA . ) I A.

There is another embedding of truth values into instance degrees, which is an anti-monotone semilattice homomorphism.

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

7

Proposition 2.11. The map which takes a truth value p   to the predicate p  1, defined by p(x) = p, is an anti-monotone embedding of  into instance degrees. It satisfies, for all p, q   and predicates   A:
 I 1,  I , (p  q) I p  q, (x  A . (x)) I xA(x).
Proof. The map is is an anti-monotone embedding because p I q is equivalent to q  p. The four equivalences are easily checked, one just has to unfold the definitions.

We can ask what it would take to also have (p  q) I p  q,
(x  A . (x)) I xA(x).
The first equivalence is a special case of the second one, and the second one turns out to be an instance of the so-called "Drinker Paradox", provided that A is inhabited.

Proposition 2.12. For a predicate   A on an inhabited set A, the equivalence

(x  A . (x)) I xA(x)

holds if, and only if,

x  A . ((x)  y  A . (y)).

(2.2)

rPerdouocft.ioTnh(erxeducAtio. n(x)x)A(I x)xAI ((x)x

 A . (x)) we obtain

just holds.

When we unfold the

opposite

x  A . u  1 . ((x)  y  A . (y)),

which is equivalent to (2.2).

2.7. Excluded middle and the ¬¬-dense degrees. We do not yet possess a method for showing that two given instance degrees actually disagree. For all we know, the instance degrees might collapse to a very uninteresting lattice.
Proposition 2.13. The following are equivalent:
(1) excluded middle, (2) every instance degree is equivalent to either , 1, or , (3) instance reducibility is a total order, (4) every instance degree is either below or above 1.
Proof. We prove the cycle of implications in the given order. Assume the law of excluded middle and consider any   A. If A is empty then  I .
Otherwise, A is inhabited, in which case: if  has a counter-example then  I , and if it does not then  I 1.
The second statement implies the third one because  I 1 I . The fourth claim is an instance of the third one. Finally, suppose every instance degree is either below or above 1. To decide p  , compare 1 with the false predicate on p . If 1 is above it then p, and if 1 is below it then ¬p.

8

ANDREJ BAUER

A predicate   A represents the largest instance degree precisely when it has a counterexample, i.e., an element a  A such that ¬(a). All the other predicates are know as the ¬¬-dense ones.
Definition 2.14. A predicate   A is ¬¬-dense when it has no counter-example, i.e., ¬x  A . ¬(x), or equivalently x  A . ¬¬(x). A ¬¬-dense instance degree is one represented by a ¬¬-dense predicate.
If a predicate does not represent the largest instance degree, then it is ¬¬-dense. However, a predicate which is not ¬¬-dense need not be the largest instance degree because intuitionistically ¬¬x  A . ¬(x) does not generally imply x  A . ¬(x).
The ¬¬-dense degrees are closely related to the degree of excluded middle, which is the predicate LEM   defined by LEM(p)  (p  ¬p). Its degree is the same as that of double negation elimination DNE  , defined by DNE(p)  (¬¬p  p). Indeed, the usual proofs of implications between the two principles are instance reductions.
Proposition 2.15. An instance degree is ¬¬-dense if, and only if, it is reducible to the degree of excluded middle.
Proof. It is simpler to establish the claim by using DNE instead of LEM. If   A is ¬¬-dense then  I DNE is witnessed by the map A   taking x to (x). For the converse, suppose   A is instance reducible to DNE. Then for any x  A there is p   such that (¬¬p  p)  (x), hence ¬  ¬(¬¬p  p), but ¬(¬¬p  p) is false.
The rudimentary structure of instance degrees is summarized in Figure 1. The gray areas
·
LE·M


·1

¬¬


·
Figure 1: The lattice of instance degrees
marked with  and  are the two embeddings of . The area marked with ¬¬ represents the ¬¬-dense predicates. On one hand we cannot exhibit a degree outside the gray area, as that would give an instance degree which is incomparable with 1. On the other hand, assuming that every degree is in the gray area amounts to excluded middle by Proposition 2.13.

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

9

3. INSTANCE REDUCIBILITY IN REALIZABILITY MODELS
We next work out the interpretation of instance degrees in realizability models. For this purpose we give a brief overview of the relevant concepts and refer to [6] for background material.
3.1. An overview of realizability models. A partial combinatory algebra (pca) is a set A equipped with a partial binary operation · such that there exist the k, s  A satisfying, for all a, b, c  A,
k·a, k·a·b = a, s·a·b, and s·a·b·c = (a·c)·(b·c).
Application associates to the left, i.e., a·b·c = (a·b)·c. Above we wrote e to indicate that the term e is defined, and therefore so are all the subterms. If we use a particular term e in a statement, we tacitly assume that it is defined. Partial combinatory algebras are so called because of their combinatorial completeness: given any term e formed using partial application, elements of A and a variable x, we can construct a  A such that, for all b  A, if e[b/x] then a·b and a·b = e[b/x], and similarly for several variables. The element a so constructed is denoted [x]e, for example [x]x is the identity combinator which satisfies ([x]x)·b = b. Every pca has a pairing and projections pair, fst, snd  A, which satisfy
fst·(pair·a·b) = a and snd·(pair·a·b) = b.
We also write a, b for pair a b. A non-trivial pca has an embedding N  A which assigns to every number n its numeral n in such a way that all partial computable maps are representable in A.
Some well-known pcas are:
(1) Kleene's first pca: the natural numbers N with application {m}n which applies the m-th partial computable function to n;
(2) Kleene's second pca: the Baire space NN with application  | , as described in [6, §1.4.3]; (3) the untyped -calculus is a pca whose elements are the closed terms, with k = x y . x and
s = x y z . (x y) (y z). An elementary sub-pca is a subset A  A which is closed under application and contains some k and s suitable for A. For example, the computable sequences (NN)eff  NN form an elementary sub-pca of Kleene's second pca [6, §2.6.9].
From any pca A with an elementary sub-pca A  A, the relative realizability topos RT(A, A) can be built [6, §2.6.9]. Of special significance is the the topos RT(NN, (NN)eff ) which embodies Kleene-Vesley realizability [4] as well as Type 2 computability [7]. Luckily we need not review the construction of relative realizability toposes because the smaller and simpler categories of assemblies suffice for our purposes, as they often do.
Suppose A is a pca and A  A an elementary sub-pca. An assembly S = (S, S) is a set S with a realizability relation A  A × S, such that x  S . r  A . r A x. When r A x holds we say that r is a realizer of x. The realizability relation S may be transposed in two ways to give equivalent formulations of assemblies. First, the assembly S may be seen a set S equipped with an existence predicate ES : S  P(A), defined by ES(x) = {r  A | r S x}. Second, the assembly may be seen as a multi-valued representation, which is a partial map S : A  P(S) defined by S(r) = {x  S | r S x} on the subset {r  A | x  S . r S x}. Thus ES(s) is always inhabited, and so is S(r) whenever it is defined.
An assembly S is modest when no two elements share a realizer, i.e., if r S x and r S y then x = y. Equivalently, S is modest when the representation S is single-valued. An assembly is partitioned when every element has a single realizer, i.e., if r S x and s S x then r = s. Equivalently, S is partitioned when ES(x) is a singleton for all x  S.

10

ANDREJ BAUER

An assembly map f : S  T is a map between underlying sets f : S  T for which there exists r  A such that if s A x then r·s and r·s B f (x). We say that r tracks or realizes f . Assemblies and assembly maps form a category Asm(A, A) which is a full subcategory of the realizability topos RT(A, A).
The category of assemblies is large because there is an embedding  : Set  Asm(A, A)
which maps a set X to the assembly X = (X, X ) whose underlying set is X and the realiz-
ability relation is trivial: r X x holds for all r  A.

3.2. The realizability logic. In order to unravel the realizability interpretation of instance reducibilities, we first need an explicit description of realizability logic. Throughout we work with a pca A and an elementary sub-pca A  A.
In realizability truth values are sets of realizers   P(A). We say that r   realizes  and write r . It is useful to think of r  as stating that r is a computational witness of . The truth values are ordered by the entailment relation , defined by
    there is r  A, such that for all s  A, if s  then r·s .

Entailment endows P(A) with the structure of a Heyting prealgebra, whose operations are defined as follows, where ,   P(A):
(1) r  always, (2) r  never, (3) r    when fst·r  and snd·r , (4) r    when either fst·r = 0 and snd·r , or snd·r = 1 and snd·r , (5) r    when for all p, if p  then r·p .
By taking into account that in intuitionistic logic ¬ is defined as   , we get
(6) r ¬ when there is no s  A such that s , and (7) r ¬¬ when there is s  A such that s .
Next we define realizability predicates and relations.

Definition 3.1. A realizability predicate   S on an assembly S is a map  : S  P(A). We
write p (x) when p  (x) and say that p realizes (x). Given another predicate   S, we say that  entails  and write  S  when there is r  A such that, for all x, s and p, if s S x and p (x) then r·s·p (x).

The connossieurs can note that the representation of predicates given here is equivalent to the
strict extensional predicates [6, §2.2] because extensionality is automatic for assemblies and we ensure strictness by passing to r a realizer s S x in addition to p (x).
Entailment S is not just pointwise entailment  because a single realizer r  A witnesses S for all x  S. Consequently the Heyting prealgebra operations induced by S are the uniform versions of the ones given above. That is, the conjunction    : S  P(A) of ,  : S  P(A) is the set of those realizers r  A such that, for all s, x, if s S x then r·s  (x)  (x), and analogously for other connectives.
Given a realizability relation   S × T, its quantifications

x  S . (x, y) and x  S . (x, y)

are predicates on T given for y  T by:
(8) r x  S . (x, y) when for all s, x, t, if t T y and s S x then r·t·s (x, y), (9) r x  S . (x, y) when, for all t, if t T y then there is x  S such that fst·(r·t)
snd·(r·t) (x, y).

S x and

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

11

Finally, equality on S is the realizability relation =S : S × S  P(A) characterized by (10) r x =S y when x = y.
3.3. Instance degrees in assemblies. Every instance degree in a realizability topos already appears as an instance degree on an assembly, thanks to Proposition 2.7 and the following observation.
Proposition 3.2. The partitioned assemblies are (internally) projective in RT(A, A), and every object of the topos is covered by a partitioned assembly.
Proof. The proof of [6, Prop. 3.2.7] for the effective topos adapts to any relative realizability topos.
We thus lose nothing by narrowing attention from the realizability topos to the subcategory of assemblies. Given realizability predicates   S and   T on assemblies S and T,  I  unfolds as
x  S . y  T . (y)  (x). A realizer r for the above statement operates as follows: for all s, x, if s S x then there is y  T such that fst·(r·s) T y and whenever p (y) then snd·(r·s)·p (x). Such r can be equivalently represented by 1, 2  A satisfying: for all s, x, if s S then 1·s T y for some y  T and whenever p (y) then 2·s·p (x). Indeed, from r we obtain 1 = [a]fst·(r·a) and 2 = [a]snd·(r·a), whereas from 1 and 2 we reconstruct r = [a] 1·a, 2·a . We have established the following description of instance reducibility in assemblies.
Proposition 3.3. A realizability predicate   S is instance reducible to   T when there exist 1, 2  A such that, for all s  A and x  S, if s S x then there is y  T such that 1·s T y, and for all p, if p (y) then 2·s·p (x).
The preceding proposition may be used to translate the constructive statements of Section 2 to any realizability model. To familiarize ourselves with instance degrees in assemblies, we illustrate the method on several examples.
Because the subobject classifier  is not an assembly, the degree of Excluded middle is not directly represented by a realizability predicate on an assembly. However, we may lift Excluded middle along the cover (P(A))   and calculate it to be the realizability predicate LEM  (P(A)) given by
LEM() = { n, r | (n = 1  r  )  (n = 0   = )}.
Thus LEM() = { 0, r | r  A}, while for  =  we have LEM() = { 1, r | r  }. Next we characterize the ¬¬-dense realizability predicates.
Proposition 3.4. A realizability predicate   S is ¬¬-dense if, and only if, (x) =  for all x  S.
Proof. If r x  S . ¬¬(x), then any x  S has s  A such that s S x, hence r·s  ¬¬(x) and (x) = . Conversely, if (x) =  for all x  S, then ¬¬(x) = A for all x  S, therefore [a]a x  S . ¬¬(x).
The characterization of ¬¬-dense degrees from Proposition 2.15 transfers as follows.
Proposition 3.5. A realizability predicate   S is instance reducible to LEM, if and only if, (x) =  for all x  S.

12

ANDREJ BAUER

Proof. Suppose 1, 2  A realize the reduction  I LEM, and consider any x  S. There is r  A such that r S x, hence there is   P(A) such that 2·r·p  (x) for all p  LEM(). Now (x) =  because LEM() = .
Conversely, suppose (x) =  for all x  S. We claim that 1 = k·k and 2 = k·snd realize  I LEM. For suppose x  S and r S x. Then LEM((x)) = { 1, p | p  (x)} because (x) =  and consequently 2·s· 1, p = p  (x), as required.
The Heyting implication    of realizability predicates   S and   T is the realizability predicate (r, )   on the assembly S  T, defined by
(S  T) = {(r, )  A × P(A) | r x  S . y  T . (y)  (x)  },
s ST (r, )  s = r.
We would prefer a more illuminating description, or at least a useful example of one. Suprema and infima of families of instance degrees must be computed with proper attention
to realizers. A family of assemblies (Si)iI indexed by an assembly I is just an assignment of an assembly Si to each index i  I. Similarly, a family of realizability predicates i  Si indexed by I assigns a map i : Si  P(A) to each i  I. The supremum of such a family is the realizability predicate  : S  P(A), where
S = {(i, x) | i  I  x  Si},
r S (i, x)  fst·r I i and snd·r S x,
defined by ( )(i, x) = i(x).
3.4. Extended Weihrauch degrees. Because the category of assemblies is large, the instance degrees form a proper class. Here is an equivalent description of instance degrees which forms a set-sized preorder.
Definition 3.6. An extended Weihrauch degree is a map f : A  P(P(A)). Its support is the set f = {r  A | f (r) = }. We say that f : A  P(P(A)) is Weihrauch reducible to g : A  P(P(A)), written f W g, when there exist 1, 2  A such that for all r  f : (1) 1·r and 1·r  g , (2) for every   f (r) there is   g(1·r), such that 2·r   .
(Recall from Section 3 that 2·r    means: if s   then 2·r·s and 2·r·s  .) Weihrauch reductions evidently form a preorder.
Proposition 3.7. Extended Weihrauch degrees and instance degrees in Asm(A, A) are equivalent preorders.
Proof. In one direction the equivalence maps a realizability predicate   S to the extended Weihrauch degree F  : A  P(P(A)) given by
F (r) = {(x) | x  S  r S x}. Let us verify that F is monotone. If 1, 2  A witness  I , as in Proposition 3.3, then they witness F  W F  too. First, if r  F  then r S x for some x  S, hence there is y  T such that 1·r and 1·r T y, from which we conclude 1·r  F  . Second, if   F (r) then there is x  S such that r S x and  = (x), and we may take  = (y) to satisfy 2·r   .

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

13

In the opposite direction the equivalence takes an extended Weihrauch degree f : A  P(P(A)) to the realizability predicate 2  Gf where Gf is the assembly
Gf = {(r, )  A × P(A) |   f (r)},
s Gf (r, )  s = r,
and 2 is the second projection (r, )  . Again, we must establish monotonicity of G. If 1, 2  A witness f W g then they also witness G(f ) I G(g). First, if s Gf (r, ) then s = r and   f (r), therefore r  f and 1·r  g . Second, there is   g(1·r) such that 2·r   , hence (1·r, )  Gg and if p   then 2·r·p  , as required.
It remains to be checked that F and G form an equivalence. Unfolding of definitions shows that F  G is the identity. To see that G(F ) I  for any   S, observe that
G(F f ) = {(r, (x))  A × P(A) | r S x},
s G(F ) (r, (x))  s = r.
Now it is clear that both G(F ) I  and  I G(F ) are realized by 1 = [a]a and 2 = [a][b]b.

Various properties of realizability predicates may be transferred to extended Weihrauch degrees via the equivalence given in the proof of Proposition 3.7. For example, if   S is a realizability predicate on a modest assembly then the extended Weihrauch degree F  satisfies

F (r) = {(x)} if r S x,



if r does not realize any x  S.

Thus we define a modest extended Weihrauch degree to be a map f : A  P(P(A)) such that f (r) has at most one element for every r  A. In a similar fashion the characterization of ¬¬-density given in Proposition 3.4 prompts us to define a ¬¬-dense extended Weihrauch degree to be a map f : A  P(P(A)) such that for  =  for all r  A and   f (r).

3.5. Weihrauch degrees as a sublattice of instance degrees. Weihrauch degrees [2] are defined
in the context of Type 2 computability [7]. We first generalize them in a straightforward manner to any pca A with an elementary sub-pca A  A.
An (ordinary) Weihrauch degree is a relation U  A × A, whose support is U = {r  A | s  A . (r, s)  U }. By writing U [r] = {s  A | (r, s)  U } we construe U as a multivalued map from U to A. A Weihrauch reduction U w V from V  A × A is given by 1, 2  A such that, for all r  U ,
(1) 1·r and 1·r  V , and (2) 2·r·s and 2·r·s  V [1·r] for all s  U [r].
Proposition 3.8. The preorder of Weihrauch degrees is equivalent to the preorder of the ¬¬-dense modest extended Weihrauch degrees.

Proof. To each Weihrauch degree U  A × A we associate the extended Weihrauch degree U :

A  P(P(A)), defined by

U (r) =

{U [r]} 

if r  U , otherwise.

It is clear that U is both ¬¬-dense and modest. The assignment is monotone, for if U w V is witnessed by 1, 2  A then U W V is witnessed by 1 and 2 as well.

14

ANDREJ BAUER

For the opposite direction, suppose  : A  P(P(A)) is an extended Weihrauch degree which is ¬¬-dense and modest, so that there is a unique map u : A  P(A) such that (r) = {u(r)} and u(r) =  for all r   . Let U  A × A be the Weihrauch degree characterized by U =  and U[r] = u(r), i.e.,
U = {(r, s)  A × A |   (r) . s  }.
Once again it is easy to see that if 1, 2  A witness  W  then they also witness U w V. The maps U  U and   U are monotone and inverses of each other, therefore they constitute an equivalence of preorders.

4. EXAMPLES
We make a cursory exploration of the structure of instance degrees in a realizability model through several examples, and leave a more serious analysis for a future time.

4.1. Non-trivial non-¬¬-degrees. When A = A the only degree which is not ¬¬-dense is the top degree. Indeed, if   S is not ¬¬-dense then (a) =  for some a  S, hence r, s x  S . ¬(x) where r S a and s  A is arbitrary. The same trick does not work when A = A, for we have no guarantee that there is r  A such that r S a.
The previous observation inspires the following example. The natural numbers form an as-
sembly N = (N, N) where each number n  N realized by the corresponding numeral n. The underlying set of the exponential NN = F = (F, F ) is the set of number functions that are
realized by elements of A,

F = {f : N  N | r  A . n  N . r·n = f (n)}.

Let  be a standard enumeration of partial computable maps, and define the realizability predicate

CT  F by

CT(f ) = {m  A | f = m}.

Here CT stands for "Church's thesis" because the realizers of CT(f ) are numerals m witnessing

computability of f . Construed as an extended Weihrauch degree, CT is the map CT : A  P(P(A))

defined by

CT(r) = {{m  A | k  N . r·k = m(n)}} if k  N . n  N . r·k = n



otherwise.

The formula f  F . CT(f ), which can be read as "all functions are computable", is realized by s  A such that if r F f then s·r = m and f = m for some m  N. Whether such a realizer exists depends on the choice of A and A. For example, in the effective topos A = A = N and we may simply take s = [a]a. In contrast, in Kleene-Vesley realizability CT is an interesting example of a degree that does not arise as an ordinary Weihrauch degree. Indeed it is not ¬¬-dense because CT(h) =  for non-computable h : N  N, but at the same time h  F . ¬CT(h) has no
computable realizers.

INSTANCE REDUCIBILITY AND WEIHRAUCH DEGREES

15

4.2. Embedding of truth values. Let us reformulate the embeddings of the subobject classifier
into instance degrees from Section 2.6 as extended Weihrauch degrees. A short calculation reveals that the embedding from Proposition 2.10 takes a realizability truth value   P(A) to the (ordinary) Weihrauch degree T : A  P(P(A)), defined by

T(r) =

{A} 

if r  , otherwise.

It is easily seen that T W T holds precisely when there is   A such that    , which reaffirms monotonicity of the embedding with respect to . In Kleene-Vesley realizability   T
is just the familiar embedding of the Medvedev lattice into Weihrauch degrees. The embedding from Proposition 2.11 takes   P(A) to the modest degree  : A 
P(P(A)), defined by (r) = {}, which in Kleene-Vesley realizability provides an anti-monotone
semilattice embedding of the Medvedev lattice into extended Weihrauch degrees.

4.3. Reductions to and from non-modest degrees. The degrees from Sections 4.1 and 4.2 are all modest, so one may wonder whether the non-modest degrees are of any use.
First, there are interesting non-modest degrees, such as Excluded middle LEM, represented by the non-modest extended Weihrauch degree
LEM(r) = {{ 1, s | s  } |   P(A)}  {{ 0, s | s  A}},
Another one arises from the Weak Excluded middle p   . ¬p¬¬p and is represented by the nonmodest extended Weihrauch degree WLEM : A  P(P(A)), defined by WLEM(r) = {{0}, {1}}.
Second, with non-modest degrees we may control what information a reduction has access to and what it needs to compute. To demonstrate the phenomenon, consider realizability predicates   S × T and   U. Taking into account the fact that the realizers in T are uninformative,  I  turns out to hold when there are 1, 2  A satisfying for all r, x, and y: if r S x and y  T then there is z  U such that 1·r U z and 2·r (z)  (x, y). We see that 1, 2 must perform independently of y because they receive no information about it.
The opposite reduction  I  holds when there are 1, 2  A satisfying for all r and z: if r U z then there are x  S and y  T such that 1·r S x and 2·r (x, y)  (z). Thus 1 is needs only compute a realizer for x, whereas a suitable y may be determined from z in any, possibly non-computable fashion.
To further elucidate the difference between reductions to modest and non-modest degrees, we compare reductions of a Weihrauch degree U  NN × NN to WLEM and LPO in Kleene-Vesley realizability. Above we already represented WLEM as an extended Weihrauch degree, while the Limited principle of omniscience LPO is represented by the Weihrauch degree
LPO = { ,   NN × NN | ((0) = 0  n . (n) = 0)  ((0) = 0  n . (n) = 0)}.
The reductions of U to LPO and WLEM are as follows: (1) U W LPO holds when there are computable maps 1 : U  NN and 2 : U × {0, 1} 
NN satisfying, for all   U ,
((n . 1()(n) = 0)  2(, 0)  U []) 
((n . 1()(n) = 0)  2(, 1)  U []).
(2) U W WLEM holds when there is a computable map 2 : U × {0, 1}  NN satisfying, for all   U , 2(, 0)  U []  2(, 1)  U [].

16

ANDREJ BAUER

In both cases 2 receives a bit of advice, but in the first case 1 must compute what the advice is about.
Acknowledgment. An initial version of the material presented here was carried out in cooperation with Kazuto Yoshimura from the Japan Advanced Institute of Science and Technology. Unfortunately, I have not had the opportunity to complete the work with Mr. Yoshimura, as he left the institute and I lost all contact with him.
REFERENCES
[1] Peter Aczel. The type theoretic interpretation of constructive set theory. In Angus Macintyre, Leszek Pacholski, and Jeff Paris, editors, Logic Colloquium '77, volume 96 of Studies in Logic and the Foundations of Mathematics, pages 55­66. Elsevier, 1978.
[2] Vasco Brattka and Guido Gherardi. Weihrauch degrees, omniscience principles and weak computability. The Journal of Symbolic Logic, 76(1):143­176, 2011.
[3] Hajime Ishihara. Reverse mathematics in Bishop's constructive mathematics. Philosophia Scientiæ, 6:43­59, 2006. [4] Stephen Cole Kleene and Richard Euge`ne Vesley. The Foundations of Intuitionistic Mathematics, especially in rela-
tion to recursive functions. North-Holland Publishing Company, 1965. [5] M. B. Smyth. Power domains. Journalof Computer and System Sciences, 16:23­36, 1978. [6] Jaap van Oosten. Realizability: An Introduction To Its Categorical Side, volume 152 of Studies in logic and the
foundations of mathematics. Elsevier, 2008. [7] Klaus Weihrauch. Computable Analysis. Springer, Berlin, 2000.

This work is licensed under the Creative Commons Attribution License. To view a copy of this license, visit https://creativecommons.org/licenses/by/4.0/ or send a letter to Creative Commons, 171 Second St, Suite 300, San Francisco, CA 94105, USA, or Eisenacher Strasse 2, 10777 Berlin, Germany

